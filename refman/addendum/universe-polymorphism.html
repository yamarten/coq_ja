

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ja" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ja" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Polymorphic Universes &mdash; Coq 8.8.2 ドキュメント</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/fonts.css" type="text/css" />
  <link rel="stylesheet" href="../_static/ansi.css" type="text/css" />
  <link rel="stylesheet" href="../_static/coqdoc.css" type="text/css" />
  <link rel="stylesheet" href="../_static/notations.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pre-text.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="Bibliography" href="../zebibliography.html" />
    <link rel="prev" title="Miscellaneous extensions" href="miscellaneous-extensions.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Coq
          

          
          </a>

          
            
            
              <div class="version">
                8.8.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">索引</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-cmdindex.html">Command index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-tacindex.html">Tactic index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-optindex.html">Flags, options and tables index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-exnindex.html">Errors and warnings index</a></li>
</ul>
<p class="caption"><span class="caption-text">はじめに</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">はじめに</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
</ul>
<p class="caption"><span class="caption-text">言語</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/gallina-specification-language.html">The Gallina specification language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/gallina-extensions.html">Extensions of <span class="smallcaps">Gallina</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/coq-library.html">The <span class="smallcaps">Coq</span> library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/cic.html">Calculus of Inductive Constructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/module-system.html">The Module System</a></li>
</ul>
<p class="caption"><span class="caption-text">証明エンジン</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/vernacular-commands.html">Vernacular commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/proof-handling.html">Proof handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/tactics.html">Tactics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/ltac.html">The tactic language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/detailed-tactic-examples.html">Detailed examples of tactics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html">The <span class="smallcaps">SSReflect</span> proof language</a></li>
</ul>
<p class="caption"><span class="caption-text">ユーザ拡張</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user-extensions/syntax-extensions.html">Syntax extensions and interpretation scopes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-extensions/proof-schemes.html">Proof schemes</a></li>
</ul>
<p class="caption"><span class="caption-text">実用ツール</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../practical-tools/coq-commands.html">The <span class="smallcaps">Coq</span> commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practical-tools/utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practical-tools/coqide.html"><span class="smallcaps">Coq</span> Integrated Development Environment</a></li>
</ul>
<p class="caption"><span class="caption-text">付録</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="extended-pattern-matching.html">Extended pattern matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="implicit-coercions.html">Implicit Coercions</a></li>
<li class="toctree-l1"><a class="reference internal" href="canonical-structures.html">Canonical Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="type-classes.html">Type Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="omega.html">Omega: a solver for quantifier-free problems in Presburger Arithmetic</a></li>
<li class="toctree-l1"><a class="reference internal" href="micromega.html">Micromega: tactics for solving arithmetic goals over ordered rings</a></li>
<li class="toctree-l1"><a class="reference internal" href="extraction.html">Extraction of programs in <span class="smallcaps">OCaml</span> and Haskell</a></li>
<li class="toctree-l1"><a class="reference internal" href="program.html">Program</a></li>
<li class="toctree-l1"><a class="reference internal" href="ring.html">The ring and field tactic families</a></li>
<li class="toctree-l1"><a class="reference internal" href="nsatz.html">Nsatz: tactics for proving equalities in integral domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="generalized-rewriting.html">Generalized rewriting</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallel-proof-processing.html">Asynchronous and Parallel Proof Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="miscellaneous-extensions.html">Miscellaneous extensions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Polymorphic Universes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#general-presentation">General Presentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#polymorphic-monomorphic">Polymorphic, Monomorphic</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cumulative-noncumulative">Cumulative, NonCumulative</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#an-example-of-a-proof-using-cumulativity">An example of a proof using cumulativity</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cumulativity-weak-constraints">Cumulativity Weak Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="#global-and-local-universes">Global and local universes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#conversion-and-unification">Conversion and unification</a></li>
<li class="toctree-l2"><a class="reference internal" href="#minimization">Minimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#explicit-universes">Explicit Universes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#polymorphic-definitions">Polymorphic definitions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../zebibliography.html">Bibliography</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Coq</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Polymorphic Universes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/coq/coq/blob/master/doc/sphinx/addendum/universe-polymorphism.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="math-preamble math notranslate">
\[\begin{split}\newcommand{\alors}{\textsf{then}}
\newcommand{\alter}{\textsf{alter}}
\newcommand{\as}{\kw{as}}
\newcommand{\Assum}[3]{\kw{Assum}(#1)(#2:#3)}
\newcommand{\bool}{\textsf{bool}}
\newcommand{\case}{\kw{case}}
\newcommand{\conc}{\textsf{conc}}
\newcommand{\cons}{\textsf{cons}}
\newcommand{\consf}{\textsf{consf}}
\newcommand{\conshl}{\textsf{cons\_hl}}
\newcommand{\Def}[4]{\kw{Def}(#1)(#2:=#3:#4)}
\newcommand{\emptyf}{\textsf{emptyf}}
\newcommand{\End}{\kw{End}}
\newcommand{\kwend}{\kw{end}}
\newcommand{\EqSt}{\textsf{EqSt}}
\newcommand{\even}{\textsf{even}}
\newcommand{\evenO}{\textsf{even}_\textsf{O}}
\newcommand{\evenS}{\textsf{even}_\textsf{S}}
\newcommand{\false}{\textsf{false}}
\newcommand{\filter}{\textsf{filter}}
\newcommand{\Fix}{\kw{Fix}}
\newcommand{\fix}{\kw{fix}}
\newcommand{\for}{\textsf{for}}
\newcommand{\forest}{\textsf{forest}}
\newcommand{\from}{\textsf{from}}
\newcommand{\Functor}{\kw{Functor}}
\newcommand{\haslength}{\textsf{has\_length}}
\newcommand{\hd}{\textsf{hd}}
\newcommand{\ident}{\textsf{ident}}
\newcommand{\In}{\kw{in}}
\newcommand{\Ind}[4]{\kw{Ind}[#2](#3:=#4)}
\newcommand{\ind}[3]{\kw{Ind}~[#1]\left(#2\mathrm{~:=~}#3\right)}
\newcommand{\Indp}[5]{\kw{Ind}_{#5}(#1)[#2](#3:=#4)}
\newcommand{\Indpstr}[6]{\kw{Ind}_{#5}(#1)[#2](#3:=#4)/{#6}}
\newcommand{\injective}{\kw{injective}}
\newcommand{\kw}[1]{\textsf{#1}}
\newcommand{\lb}{\lambda}
\newcommand{\length}{\textsf{length}}
\newcommand{\letin}[3]{\kw{let}~#1:=#2~\kw{in}~#3}
\newcommand{\List}{\textsf{list}}
\newcommand{\lra}{\longrightarrow}
\newcommand{\Match}{\kw{match}}
\newcommand{\Mod}[3]{{\kw{Mod}}({#1}:{#2}\,\zeroone{:={#3}})}
\newcommand{\ModA}[2]{{\kw{ModA}}({#1}=={#2})}
\newcommand{\ModS}[2]{{\kw{Mod}}({#1}:{#2})}
\newcommand{\ModType}[2]{{\kw{ModType}}({#1}:={#2})}
\newcommand{\mto}{.\;}
\newcommand{\Nat}{\mathbb{N}}
\newcommand{\nat}{\textsf{nat}}
\newcommand{\Nil}{\textsf{nil}}
\newcommand{\nilhl}{\textsf{nil\_hl}}
\newcommand{\nO}{\textsf{O}}
\newcommand{\node}{\textsf{node}}
\newcommand{\nS}{\textsf{S}}
\newcommand{\odd}{\textsf{odd}}
\newcommand{\oddS}{\textsf{odd}_\textsf{S}}
\newcommand{\ovl}[1]{\overline{#1}}
\newcommand{\Pair}{\textsf{pair}}
\newcommand{\Prod}{\textsf{prod}}
\newcommand{\Prop}{\textsf{Prop}}
\newcommand{\return}{\kw{return}}
\newcommand{\Set}{\textsf{Set}}
\newcommand{\si}{\textsf{if}}
\newcommand{\sinon}{\textsf{else}}
\newcommand{\Sort}{\cal S}
\newcommand{\Str}{\textsf{Stream}}
\newcommand{\Struct}{\kw{Struct}}
\newcommand{\subst}[3]{#1\{#2/#3\}}
\newcommand{\tl}{\textsf{tl}}
\newcommand{\tree}{\textsf{tree}}
\newcommand{\true}{\textsf{true}}
\newcommand{\Type}{\textsf{Type}}
\newcommand{\unfold}{\textsf{unfold}}
\newcommand{\WEV}[3]{\mbox{$#1[] \vdash #2 \lra  #3$}}
\newcommand{\WEVT}[3]{\mbox{$#1[] \vdash #2 \lra$}\\ \mbox{$ #3$}}
\newcommand{\WF}[2]{{\cal W\!F}(#1)[#2]}
\newcommand{\WFE}[1]{\WF{E}{#1}}
\newcommand{\WFT}[2]{#1[] \vdash {\cal W\!F}(#2)}
\newcommand{\WFTWOLINES}[2]{{\cal W\!F}\begin{array}{l}(#1)\\\mbox{}[{#2}]\end{array}}
\newcommand{\with}{\kw{with}}
\newcommand{\WS}[3]{#1[] \vdash #2 &lt;: #3}
\newcommand{\WSE}[2]{\WS{E}{#1}{#2}}
\newcommand{\WT}[4]{#1[#2] \vdash #3 : #4}
\newcommand{\WTE}[3]{\WT{E}{#1}{#2}{#3}}
\newcommand{\WTEG}[2]{\WTE{\Gamma}{#1}{#2}}
\newcommand{\WTM}[3]{\WT{#1}{}{#2}{#3}}
\newcommand{\zeroone}[1]{[{#1}]}
\newcommand{\zeros}{\textsf{zeros}}
\end{split}\]</div>
<div class="section" id="polymorphic-universes">
<span id="polymorphicuniverses"></span><h1>Polymorphic Universes<a class="headerlink" href="#polymorphic-universes" title="このヘッドラインへのパーマリンク">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Matthieu Sozeau</td>
</tr>
</tbody>
</table>
<div class="section" id="general-presentation">
<h2>General Presentation<a class="headerlink" href="#general-presentation" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">The status of Universe Polymorphism is experimental.</p>
</div>
<p>This section describes the universe polymorphic extension of <span class="smallcaps">Coq</span>.
Universe polymorphism makes it possible to write generic definitions
making use of universes and reuse them at different and sometimes
incompatible universe levels.</p>
<p>A standard example of the difference between universe <em>polymorphic</em>
and <em>monomorphic</em> definitions is given by the identity function:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">identity</span><span> {</span><span class="coqdoc-var">A</span><span> : </span><span class="coqdoc-keyword">Type</span><span>} (</span><span class="coqdoc-var">a</span><span> : </span><span class="coqdoc-var">A</span><span>) := </span><span class="coqdoc-var">a</span><span>.</span></dt>
<dd class="coqtop-hidden"><span class="first last">identity is defined</span></dd>
</dl>
</div>
<p>By default, constant declarations are monomorphic, hence the identity
function declares a global universe (say <code class="docutils literal notranslate"><span class="pre">Top.1</span></code>) for its domain.
Subsequently, if we try to self-apply the identity, we will get an
error:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-var">Fail</span><span> </span><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">selfid</span><span> := </span><span class="coqdoc-var">identity</span><span> (&#64;</span><span class="coqdoc-var">identity</span><span>).</span></dt>
<dd><span class="first">The command has indeed failed with message:
The term &quot;&#64;</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">identity</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&quot; has type &quot;</span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">forall</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> A : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">, </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&quot;
while it is expected to have type &quot;</span><span class="ansi-fg-light-blue ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">?A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&quot;
(unable to find a well-typed instantiation for &quot;?A&quot;: cannot ensure that
&quot;</span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.1+1}&quot; is a subtype of &quot;</span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&#64;{Top.1}&quot;).</span></dd>
</dl>
</div>
<p>Indeed, the global level <code class="docutils literal notranslate"><span class="pre">Top.1</span></code> would have to be strictly smaller than
itself for this self-application to type check, as the type of
<code class="code Coq docutils literal notranslate"><span class="operator"><span class="pre">(&#64;</span></span><span class="name"><span class="pre">identity</span></span><span class="operator"><span class="pre">)</span></span></code> is <code class="code Coq docutils literal notranslate"><span class="keyword"><span class="pre">forall</span></span> <span class="operator"><span class="pre">(</span></span><span class="name"><span class="pre">A</span></span> <span class="operator"><span class="pre">:</span></span> <span class="keyword type"><span class="pre">Type</span></span><span class="operator"><span class="pre">&#64;{</span></span><span class="name"><span class="pre">Top</span></span><span class="operator"><span class="pre">.</span></span><span class="literal number integer"><span class="pre">1</span></span><span class="operator"><span class="pre">}),</span></span> <span class="name"><span class="pre">A</span></span> <span class="operator"><span class="pre">-&gt;</span></span> <span class="name"><span class="pre">A</span></span></code> whose type is itself
<code class="code Coq docutils literal notranslate"><span class="keyword type"><span class="pre">Type</span></span><span class="operator"><span class="pre">&#64;{</span></span><span class="name"><span class="pre">Top</span></span><span class="operator"><span class="pre">.</span></span><span class="literal number integer"><span class="pre">1</span></span><span class="operator"><span class="pre">+</span></span><span class="literal number integer"><span class="pre">1</span></span><span class="operator"><span class="pre">}</span></span></code>.</p>
<p>A universe polymorphic identity function binds its domain universe
level at the definition level instead of making it global.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-var">Polymorphic</span><span> </span><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">pidentity</span><span> {</span><span class="coqdoc-var">A</span><span> : </span><span class="coqdoc-keyword">Type</span><span>} (</span><span class="coqdoc-var">a</span><span> : </span><span class="coqdoc-var">A</span><span>) := </span><span class="coqdoc-var">a</span><span>.</span></dt>
<dd class="coqtop-hidden"><span class="first last">pidentity is defined</span></dd>
</dl>
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">About</span><span> </span><span class="coqdoc-var">pidentity</span><span>.</span></dt>
<dd><span class="first">pidentity&#64;{Top.2} : </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">forall</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> A : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">, </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">

pidentity is universe polymorphic
Argument A is implicit and maximally inserted
Argument scopes are [type_scope _]
pidentity is transparent
Expands to: Constant Top.pidentity</span></dd>
</dl>
</div>
<p>It is then possible to reuse the constant at different levels, like
so:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">selfpid</span><span> := </span><span class="coqdoc-var">pidentity</span><span> (&#64;</span><span class="coqdoc-var">pidentity</span><span>).</span></dt>
<dd class="coqtop-hidden"><span class="first last">selfpid is defined</span></dd>
</dl>
</div>
<p>Of course, the two instances of <code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">pidentity</span></span></code> in this definition are
different. This can be seen when the <a class="reference internal" href="../language/gallina-extensions.html#coq:flag.printing-universes" title="Printing Universes"><code class="xref coq coq-flag docutils literal notranslate"><span class="pre">Printing</span> <span class="pre">Universes</span></code></a> flag is on:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt class="coqtop-hidden"><span class="coqdoc-keyword">Set Printing Universes</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
</dl>
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Print</span><span> </span><span class="coqdoc-var">selfpid</span><span>.</span></dt>
<dd><span class="first">selfpid = 
</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">pidentity</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.3} (&#64;</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">pidentity</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.4})
     : </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">forall</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> A : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.4}, </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">
(* {Top.4 Top.3} |= Top.4 &lt; Top.3
                     *)

Argument scopes are [type_scope _]</span></dd>
</dl>
</div>
<p>Now <code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">pidentity</span></span></code> is used at two different levels: at the head of the
application it is instantiated at <code class="docutils literal notranslate"><span class="pre">Top.3</span></code> while in the argument position
it is instantiated at <code class="docutils literal notranslate"><span class="pre">Top.4</span></code>. This definition is only valid as long as
<code class="docutils literal notranslate"><span class="pre">Top.4</span></code> is strictly smaller than <code class="docutils literal notranslate"><span class="pre">Top.3</span></code>, as shown by the constraints. Note
that this definition is monomorphic (not universe polymorphic), so the
two universes (in this case <code class="docutils literal notranslate"><span class="pre">Top.3</span></code> and <code class="docutils literal notranslate"><span class="pre">Top.4</span></code>) are actually global
levels.</p>
<p>When printing <code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">pidentity</span></span></code>, we can see the universes it binds in
the annotation <code class="code Coq docutils literal notranslate"><span class="operator"><span class="pre">&#64;{</span></span><span class="name"><span class="pre">Top</span></span><span class="operator"><span class="pre">.</span></span><span class="literal number integer"><span class="pre">2</span></span><span class="operator"><span class="pre">}</span></span></code>. Additionally, when
<a class="reference internal" href="../language/gallina-extensions.html#coq:flag.printing-universes" title="Printing Universes"><code class="xref coq coq-flag docutils literal notranslate"><span class="pre">Printing</span> <span class="pre">Universes</span></code></a> is on we print the &quot;universe context&quot; of
<code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">pidentity</span></span></code> consisting of the bound universes and the
constraints they must verify (for <code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">pidentity</span></span></code> there are no constraints).</p>
<p>Inductive types can also be declared universes polymorphic on
universes appearing in their parameters or fields. A typical example
is given by monoids:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-var">Polymorphic</span><span> </span><span class="coqdoc-keyword">Record</span><span> </span><span class="coqdoc-var">Monoid</span><span> := { </span><span class="coqdoc-var">mon_car</span><span> :&gt; </span><span class="coqdoc-keyword">Type</span><span>; </span><span class="coqdoc-var">mon_unit</span><span> : </span><span class="coqdoc-var">mon_car</span><span>;</span><span>
&nbsp;&nbsp;</span><span class="coqdoc-var">mon_op</span><span> : </span><span class="coqdoc-var">mon_car</span><span> -&gt; </span><span class="coqdoc-var">mon_car</span><span> -&gt; </span><span class="coqdoc-var">mon_car</span><span> }.</span></dt>
<dd class="coqtop-hidden"><span class="first last">Monoid is defined
mon_car is defined
mon_unit is defined
mon_op is defined</span></dd>
</dl>
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Print</span><span> </span><span class="coqdoc-var">Monoid</span><span>.</span></dt>
<dd class="coqtop-hidden"><span class="first">Polymorphic NonCumulative </span><span class="ansi-fg-light-red ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Record</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> Monoid : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.6+1} := Build_Monoid
  { mon_car : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.6};
    mon_unit : </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">mon_car</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">;
    mon_op : </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">mon_car</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">mon_car</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">mon_car</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"> }

For Build_Monoid: Argument scopes are [type_scope _ function_scope]</span></dd>
</dl>
</div>
<p>The Monoid's carrier universe is polymorphic, hence it is possible to
instantiate it for example with <code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">Monoid</span></span></code> itself. First we build the
trivial unit monoid in <code class="code Coq docutils literal notranslate"><span class="keyword namespace"><span class="pre">Set</span></span></code>:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">unit_monoid</span><span> : </span><span class="coqdoc-var">Monoid</span><span> :=</span><span>
&nbsp;&nbsp;{| </span><span class="coqdoc-var">mon_car</span><span> := </span><span class="coqdoc-var">unit</span><span>; </span><span class="coqdoc-var">mon_unit</span><span> := </span><span class="coqdoc-var">tt</span><span>; </span><span class="coqdoc-var">mon_op</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> := </span><span class="coqdoc-var">tt</span><span> |}.</span></dt>
<dd class="coqtop-hidden"><span class="first last">unit_monoid is defined</span></dd>
</dl>
</div>
<p>From this we can build a definition for the monoid of <code class="code Coq docutils literal notranslate"><span class="keyword namespace"><span class="pre">Set</span></span></code>-monoids
(where multiplication would be given by the product of monoids).</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-var">Polymorphic</span><span> </span><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">monoid_monoid</span><span> : </span><span class="coqdoc-var">Monoid</span><span>.</span></dt>
<dd class="coqtop-hidden"><span class="first">1 subgoal
  
  ============================
  </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">Monoid</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&#64;{Top.10}</span></dd>
<dt><span class="coqdoc-tactic">refine</span><span> (&#64;</span><span class="coqdoc-var">Build_Monoid</span><span> </span><span class="coqdoc-var">Monoid</span><span> </span><span class="coqdoc-var">unit_monoid</span><span> (</span><span class="coqdoc-keyword">fun</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> =&gt; </span><span class="coqdoc-var">x</span><span>)).</span></dt>
<dd class="coqtop-hidden"><span class="first last">No more subgoals.</span></dd>
<dt><span class="coqdoc-keyword">Defined</span><span>.</span></dt>
<dd class="coqtop-hidden"><span class="first last">monoid_monoid is defined</span></dd>
</dl>
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Print</span><span> </span><span class="coqdoc-var">monoid_monoid</span><span>.</span></dt>
<dd><span class="first">Polymorphic monoid_monoid&#64;{Top.10} = 
{|
</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">mon_car</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> := </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">Monoid</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Set};
</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">mon_unit</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> := </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">unit_monoid</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">;
</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">mon_op</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> := </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">fun</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> x _ : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">Monoid</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Set} =&gt; </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> |}
     : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">Monoid</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&#64;{Top.10}
(* Top.10 |= Set &lt; Top.10
              *)

monoid_monoid is universe polymorphic</span></dd>
</dl>
</div>
<p>As one can see from the constraints, this monoid is “large”, it lives
in a universe strictly higher than <code class="code Coq docutils literal notranslate"><span class="keyword namespace"><span class="pre">Set</span></span></code>.</p>
</div>
<div class="section" id="polymorphic-monomorphic">
<h2>Polymorphic, Monomorphic<a class="headerlink" href="#polymorphic-monomorphic" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="cmd">
<dt id="coq:cmd.polymorphic">
<em class="property"><span class="sigannot">Command</span></em> <code class="descname"><span class="notation"><span>Polymorphic</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-definition"><span class="hole">definition</span></a></span></code><a class="headerlink" href="#coq:cmd.polymorphic" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>As shown in the examples, polymorphic definitions and inductives can be
declared using the <code class="docutils literal notranslate"><span class="pre">Polymorphic</span></code> prefix.</p>
</dd></dl>

<dl class="flag">
<dt id="coq:flag.universe-polymorphism">
<em class="property"><span class="sigannot">Flag</span></em> <code class="descname"><span class="notation"><span>Universe</span> <span>Polymorphism</span></span></code><a class="headerlink" href="#coq:flag.universe-polymorphism" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Once enabled, this option will implicitly prepend <code class="docutils literal notranslate"><span class="pre">Polymorphic</span></code> to any
definition of the user.</p>
</dd></dl>

<dl class="cmd">
<dt id="coq:cmd.monomorphic">
<em class="property"><span class="sigannot">Command</span></em> <code class="descname"><span class="notation"><span>Monomorphic</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-definition"><span class="hole">definition</span></a></span></code><a class="headerlink" href="#coq:cmd.monomorphic" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>When the <a class="reference internal" href="#coq:flag.universe-polymorphism" title="Universe Polymorphism"><code class="xref coq coq-flag docutils literal notranslate"><span class="pre">Universe</span> <span class="pre">Polymorphism</span></code></a> option is set, to make a definition
producing global universe constraints, one can use the <code class="docutils literal notranslate"><span class="pre">Monomorphic</span></code> prefix.</p>
</dd></dl>

<p>Many other commands support the <code class="docutils literal notranslate"><span class="pre">Polymorphic</span></code> flag, including:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">Lemma</span></code>, <code class="docutils literal notranslate"><span class="pre">Axiom</span></code>, and all the other “definition” keywords support
polymorphism.</li>
<li><code class="docutils literal notranslate"><span class="pre">Variables</span></code>, <code class="docutils literal notranslate"><span class="pre">Context</span></code>, <code class="docutils literal notranslate"><span class="pre">Universe</span></code> and <code class="docutils literal notranslate"><span class="pre">Constraint</span></code> in a section support
polymorphism. This means that the universe variables (and associated
constraints) are discharged polymorphically over definitions that use
them. In other words, two definitions in the section sharing a common
variable will both get parameterized by the universes produced by the
variable declaration. This is in contrast to a “mononorphic” variable
which introduces global universes and constraints, making the two
definitions depend on the <em>same</em> global universes associated to the
variable.</li>
<li><a class="reference internal" href="../proof-engine/tactics.html#coq:cmdv.hint-resolve" title="Hint Resolve"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Hint</span> <span class="pre">Resolve</span></code></a> and <a class="reference internal" href="../proof-engine/tactics.html#coq:cmd.hint-rewrite" title="Hint Rewrite"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Hint</span> <span class="pre">Rewrite</span></code></a> will use the auto/rewrite hint
polymorphically, not at a single instance.</li>
</ul>
</div>
<div class="section" id="cumulative-noncumulative">
<h2>Cumulative, NonCumulative<a class="headerlink" href="#cumulative-noncumulative" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Polymorphic inductive types, coinductive types, variants and records can be
declared cumulative using the <code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">Cumulative</span></span></code> prefix.</p>
<dl class="cmd">
<dt id="coq:cmd.cumulative">
<em class="property"><span class="sigannot">Command</span></em> <code class="descname"><span class="notation"><span>Cumulative</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-inductive"><span class="hole">inductive</span></a></span></code><a class="headerlink" href="#coq:cmd.cumulative" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Declares the inductive as cumulative</p>
</dd></dl>

<p>Alternatively, there is a flag <a class="reference internal" href="#coq:flag.polymorphic-inductive-cumulativity" title="Polymorphic Inductive Cumulativity"><code class="xref coq coq-flag docutils literal notranslate"><span class="pre">Polymorphic</span> <span class="pre">Inductive</span>
<span class="pre">Cumulativity</span></code></a> which when set, makes all subsequent <em>polymorphic</em>
inductive definitions cumulative.  When set, inductive types and the
like can be enforced to be non-cumulative using the <code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">NonCumulative</span></span></code>
prefix.</p>
<dl class="cmd">
<dt id="coq:cmd.noncumulative">
<em class="property"><span class="sigannot">Command</span></em> <code class="descname"><span class="notation"><span>NonCumulative</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-inductive"><span class="hole">inductive</span></a></span></code><a class="headerlink" href="#coq:cmd.noncumulative" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Declares the inductive as non-cumulative</p>
</dd></dl>

<dl class="flag">
<dt id="coq:flag.polymorphic-inductive-cumulativity">
<em class="property"><span class="sigannot">Flag</span></em> <code class="descname"><span class="notation"><span>Polymorphic</span> <span>Inductive</span> <span>Cumulativity</span></span></code><a class="headerlink" href="#coq:flag.polymorphic-inductive-cumulativity" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>When this option is on, it sets all following polymorphic inductive
types as cumulative (it is off by default).</p>
</dd></dl>

<p>Consider the examples below.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-var">Polymorphic</span><span> </span><span class="coqdoc-var">Cumulative</span><span> </span><span class="coqdoc-keyword">Inductive</span><span> </span><span class="coqdoc-var">list</span><span> {</span><span class="coqdoc-var">A</span><span> : </span><span class="coqdoc-keyword">Type</span><span>} :=</span><span>
| </span><span class="coqdoc-var">nil</span><span> : </span><span class="coqdoc-var">list</span><span>
| </span><span class="coqdoc-var">cons</span><span> : </span><span class="coqdoc-var">A</span><span> -&gt; </span><span class="coqdoc-var">list</span><span> -&gt; </span><span class="coqdoc-var">list</span><span>.</span></dt>
<dd class="coqtop-hidden"><span class="first last">list is defined
list_rect is defined
list_ind is defined
list_rec is defined</span></dd>
</dl>
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Print</span><span> </span><span class="coqdoc-var">list</span><span>.</span></dt>
<dd><span class="first">Polymorphic Cumulative </span><span class="ansi-fg-light-red ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Inductive</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
list&#64;{Top.13} (A : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.13}) : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{max(Set,Top.13)} :=
    nil : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">list</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.13} | cons : </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">list</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.13}</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">list</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&#64;{Top.13}
(* *Top.13 |=  *)

For list: Argument A is implicit and maximally inserted
For nil: Argument A is implicit and maximally inserted
For cons: Argument A is implicit and maximally inserted
For list: Argument scope is [type_scope]
For nil: Argument scope is [type_scope]
For cons: Argument scopes are [type_scope _ _]</span></dd>
</dl>
</div>
<p>When printing <code class="code Coq docutils literal notranslate"><span class="keyword type"><span class="pre">list</span></span></code>, the universe context indicates the subtyping
constraints by prefixing the level names with symbols.</p>
<p>Because inductive subtypings are only produced by comparing inductives
to themselves with universes changed, they amount to variance
information: each universe is either invariant, covariant or
irrelevant (there are no contravariant subtypings in Coq),
respectively represented by the symbols <cite>=</cite>, <cite>+</cite> and <cite>*</cite>.</p>
<p>Here we see that <code class="code Coq docutils literal notranslate"><span class="keyword type"><span class="pre">list</span></span></code> binds an irrelevant universe, so any two
instances of <code class="code Coq docutils literal notranslate"><span class="keyword type"><span class="pre">list</span></span></code> are convertible: <span class="math notranslate">\(E[Γ] ⊢ \mathsf{list}&#64;\{i\}~A
=_{βδιζη} \mathsf{list}&#64;\{j\}~B\)</span> whenever <span class="math notranslate">\(E[Γ] ⊢ A =_{βδιζη} B\)</span> and
this applies also to their corresponding constructors, when
they are comparable at the same type.</p>
<p>See <a class="reference internal" href="../language/cic.html#conversion-rules"><span class="std std-ref">Conversion rules</span></a> for more details on convertibility and subtyping.
The following is an example of a record with non-trivial subtyping relation:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-var">Polymorphic</span><span> </span><span class="coqdoc-var">Cumulative</span><span> </span><span class="coqdoc-keyword">Record</span><span> </span><span class="coqdoc-var">packType</span><span> := {</span><span class="coqdoc-var">pk</span><span> : </span><span class="coqdoc-keyword">Type</span><span>}.</span></dt>
<dd><span class="first last">packType is defined
pk is defined</span></dd>
</dl>
</div>
<p><code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">packType</span></span></code> binds a covariant universe, i.e.</p>
<div class="math notranslate">
\[E[Γ] ⊢ \mathsf{packType}&#64;\{i\} =_{βδιζη}
\mathsf{packType}&#64;\{j\}~\mbox{ whenever }~i ≤ j\]</div>
<p>Cumulative inductive types, coninductive types, variants and records
only make sense when they are universe polymorphic. Therefore, an
error is issued whenever the user uses the <code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">Cumulative</span></span></code> or
<code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">NonCumulative</span></span></code> prefix in a monomorphic context.
Notice that this is not the case for the option <a class="reference internal" href="#coq:flag.polymorphic-inductive-cumulativity" title="Polymorphic Inductive Cumulativity"><code class="xref coq coq-flag docutils literal notranslate"><span class="pre">Polymorphic</span> <span class="pre">Inductive</span> <span class="pre">Cumulativity</span></code></a>.
That is, this option, when set, makes all subsequent <em>polymorphic</em>
inductive declarations cumulative (unless, of course the <code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">NonCumulative</span></span></code> prefix is used)
but has no effect on <em>monomorphic</em> inductive declarations.</p>
<p>Consider the following examples.</p>
<div class="coqtop literal-block docutils container">
<span class="coqtop-reset"></span><dl class="docutils">
<dt><span class="coqdoc-var">Monomorphic</span><span> </span><span class="coqdoc-var">Cumulative</span><span> </span><span class="coqdoc-keyword">Inductive</span><span> </span><span class="coqdoc-var">Unit</span><span> := </span><span class="coqdoc-var">unit</span><span>.</span></dt>
<dd><span class="first">Toplevel input, characters 0-46:
&gt; Monomorphic Cumulative Inductive Unit := unit.
&gt; ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
</span><span class="ansi-fg-white ansi-bg-red ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Error:</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"> The Cumulative prefix can only be used in a polymorphic context.</span></dd>
</dl>
<span class="coqtop-reset"></span><dl class="docutils">
<dt><span class="coqdoc-var">Monomorphic</span><span> </span><span class="coqdoc-var">NonCumulative</span><span> </span><span class="coqdoc-keyword">Inductive</span><span> </span><span class="coqdoc-var">Unit</span><span> := </span><span class="coqdoc-var">unit</span><span>.</span></dt>
<dd><span class="first">Toplevel input, characters 0-49:
&gt; Monomorphic NonCumulative Inductive Unit := unit.
&gt; ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
</span><span class="ansi-fg-white ansi-bg-red ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Error:</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"> The NonCumulative prefix can only be used in a polymorphic context.</span></dd>
</dl>
<span class="coqtop-reset"></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Set</span><span> </span><span class="coqdoc-var">Polymorphic</span><span> </span><span class="coqdoc-keyword">Inductive</span><span> </span><span class="coqdoc-var">Cumulativity</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Inductive</span><span> </span><span class="coqdoc-var">Unit</span><span> := </span><span class="coqdoc-var">unit</span><span>.</span></dt>
<dd><span class="first last">Unit is defined
Unit_rect is defined
Unit_ind is defined
Unit_rec is defined</span></dd>
</dl>
</div>
<div class="section" id="an-example-of-a-proof-using-cumulativity">
<h3>An example of a proof using cumulativity<a class="headerlink" href="#an-example-of-a-proof-using-cumulativity" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Set</span><span> </span><span class="coqdoc-var">Universe</span><span> </span><span class="coqdoc-var">Polymorphism</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Set</span><span> </span><span class="coqdoc-var">Polymorphic</span><span> </span><span class="coqdoc-keyword">Inductive</span><span> </span><span class="coqdoc-var">Cumulativity</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Inductive</span><span> </span><span class="coqdoc-var">eq&#64;</span><span>{</span><span class="coqdoc-var">i</span><span>} {</span><span class="coqdoc-var">A</span><span> : </span><span class="coqdoc-var">Type&#64;</span><span>{</span><span class="coqdoc-var">i</span><span>}} (</span><span class="coqdoc-var">x</span><span> : </span><span class="coqdoc-var">A</span><span>) : </span><span class="coqdoc-var">A</span><span> -&gt; </span><span class="coqdoc-var">Type&#64;</span><span>{</span><span class="coqdoc-var">i</span><span>} := </span><span class="coqdoc-var">eq_refl</span><span> : </span><span class="coqdoc-var">eq</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">x</span><span>.</span></dt>
<dd class="coqtop-hidden"><span class="first last">eq is defined
eq_rect is defined
eq_ind is defined
eq_rec is defined</span></dd>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">funext_type&#64;</span><span>{</span><span class="coqdoc-var">a</span><span> </span><span class="coqdoc-var">b</span><span> </span><span class="coqdoc-var">e</span><span>} (</span><span class="coqdoc-var">A</span><span> : </span><span class="coqdoc-var">Type&#64;</span><span>{</span><span class="coqdoc-var">a</span><span>}) (</span><span class="coqdoc-var">B</span><span> : </span><span class="coqdoc-var">A</span><span> -&gt; </span><span class="coqdoc-var">Type&#64;</span><span>{</span><span class="coqdoc-var">b</span><span>})</span><span>
:= </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">f</span><span> </span><span class="coqdoc-var">g</span><span> : (</span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">a</span><span>, </span><span class="coqdoc-var">B</span><span> </span><span class="coqdoc-var">a</span><span>),</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">x</span><span>, </span><span class="coqdoc-var">eq&#64;</span><span>{</span><span class="coqdoc-var">e</span><span>} (</span><span class="coqdoc-var">f</span><span> </span><span class="coqdoc-var">x</span><span>) (</span><span class="coqdoc-var">g</span><span> </span><span class="coqdoc-var">x</span><span>))</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; </span><span class="coqdoc-var">eq&#64;</span><span>{</span><span class="coqdoc-var">e</span><span>} </span><span class="coqdoc-var">f</span><span> </span><span class="coqdoc-var">g</span><span>.</span></dt>
<dd class="coqtop-hidden"><span class="first last">funext_type is defined</span></dd>
<dt><span class="coqdoc-keyword">Section</span><span> </span><span class="coqdoc-var">down</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Universes</span><span> </span><span class="coqdoc-var">a</span><span> </span><span class="coqdoc-var">b</span><span> </span><span class="coqdoc-var">e</span><span> </span><span class="coqdoc-var">e'</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-var">Constraint</span><span> </span><span class="coqdoc-var">e'</span><span> &lt; </span><span class="coqdoc-var">e</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Lemma</span><span> </span><span class="coqdoc-var">funext_down</span><span> {</span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">B</span><span>}</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="coqdoc-var">H</span><span> : &#64;</span><span class="coqdoc-var">funext_type&#64;</span><span>{</span><span class="coqdoc-var">a</span><span> </span><span class="coqdoc-var">b</span><span> </span><span class="coqdoc-var">e</span><span>} </span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">B</span><span>) : &#64;</span><span class="coqdoc-var">funext_type&#64;</span><span>{</span><span class="coqdoc-var">a</span><span> </span><span class="coqdoc-var">b</span><span> </span><span class="coqdoc-var">e'</span><span>} </span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">B</span><span>.</span></dt>
<dd class="coqtop-hidden"><span class="first">1 subgoal
  
  A : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  B : </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  H : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">funext_type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">B</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  ============================
  </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">funext_type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">B</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
<dt><span class="coqdoc-keyword">Proof</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-tactic">exact</span><span> </span><span class="coqdoc-var">H</span><span>.</span></dt>
<dd class="coqtop-hidden"><span class="first last">No more subgoals.</span></dd>
<dt><span class="coqdoc-keyword">Defined</span><span>.</span></dt>
<dd class="coqtop-hidden"><span class="first last">funext_down is defined</span></dd>
<dt><span class="coqdoc-keyword">End</span><span> </span><span class="coqdoc-var">down</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
</dl>
</div>
</div>
</div>
<div class="section" id="cumulativity-weak-constraints">
<h2>Cumulativity Weak Constraints<a class="headerlink" href="#cumulativity-weak-constraints" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="flag">
<dt id="coq:flag.cumulativity-weak-constraints">
<em class="property"><span class="sigannot">Flag</span></em> <code class="descname"><span class="notation"><span>Cumulativity</span> <span>Weak</span> <span>Constraints</span></span></code><a class="headerlink" href="#coq:flag.cumulativity-weak-constraints" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>When set, which is the default, causes &quot;weak&quot; constraints to be produced
when comparing universes in an irrelevant position. Processing weak
constraints is delayed until minimization time. A weak constraint
between <cite>u</cite> and <cite>v</cite> when neither is smaller than the other and
one is flexible causes them to be unified. Otherwise the constraint is
silently discarded.</p>
<p>This heuristic is experimental and may change in future versions.
Disabling weak constraints is more predictable but may produce
arbitrary numbers of universes.</p>
</dd></dl>

</div>
<div class="section" id="global-and-local-universes">
<h2>Global and local universes<a class="headerlink" href="#global-and-local-universes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Each universe is declared in a global or local environment before it
can be used. To ensure compatibility, every <em>global</em> universe is set
to be strictly greater than <code class="code Coq docutils literal notranslate"><span class="keyword namespace"><span class="pre">Set</span></span></code> when it is introduced, while every
<em>local</em> (i.e. polymorphically quantified) universe is introduced as
greater or equal to <code class="code Coq docutils literal notranslate"><span class="keyword namespace"><span class="pre">Set</span></span></code>.</p>
</div>
<div class="section" id="conversion-and-unification">
<h2>Conversion and unification<a class="headerlink" href="#conversion-and-unification" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The semantics of conversion and unification have to be modified a
little to account for the new universe instance arguments to
polymorphic references. The semantics respect the fact that
definitions are transparent, so indistinguishable from their bodies
during conversion.</p>
<p>This is accomplished by changing one rule of unification, the first-
order approximation rule, which applies when two applicative terms
with the same head are compared. It tries to short-cut unfolding by
comparing the arguments directly. In case the constant is universe
polymorphic, we allow this rule to fire only when unifying the
universes results in instantiating a so-called flexible universe
variables (not given by the user). Similarly for conversion, if such
an equation of applicative terms fail due to a universe comparison not
being satisfied, the terms are unfolded. This change implies that
conversion and unification can have different unfolding behaviors on
the same development with universe polymorphism switched on or off.</p>
</div>
<div class="section" id="minimization">
<h2>Minimization<a class="headerlink" href="#minimization" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Universe polymorphism with cumulativity tends to generate many useless
inclusion constraints in general. Typically at each application of a
polymorphic constant <code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">f</span></span></code>, if an argument has expected type <code class="code Coq docutils literal notranslate"><span class="keyword type"><span class="pre">Type</span></span><span class="operator"><span class="pre">&#64;{</span></span><span class="name"><span class="pre">i</span></span><span class="operator"><span class="pre">}</span></span></code>
and is given a term of type <code class="code Coq docutils literal notranslate"><span class="keyword type"><span class="pre">Type</span></span><span class="operator"><span class="pre">&#64;{</span></span><span class="name"><span class="pre">j</span></span><span class="operator"><span class="pre">}</span></span></code>, a <span class="math notranslate">\(j ≤ i\)</span> constraint will be
generated. It is however often the case that an equation <span class="math notranslate">\(j = i\)</span> would
be more appropriate, when <code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">f</span></span></code>'s universes are fresh for example.
Consider the following example:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt class="coqtop-hidden"><span class="coqdoc-var">Polymorphic</span><span> </span><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">pidentity</span><span> {</span><span class="coqdoc-var">A</span><span> : </span><span class="coqdoc-keyword">Type</span><span>} (</span><span class="coqdoc-var">a</span><span> : </span><span class="coqdoc-var">A</span><span>) := </span><span class="coqdoc-var">a</span><span>.</span></dt>
<dd class="coqtop-hidden"><span class="first last">pidentity is defined</span></dd>
<dt class="coqtop-hidden"><span class="coqdoc-keyword">Set Printing Universes</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
</dl>
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">id0</span><span> := &#64;</span><span class="coqdoc-var">pidentity</span><span> </span><span class="coqdoc-var">nat</span><span> 0.</span></dt>
<dd class="coqtop-hidden"><span class="first last">id0 is defined</span></dd>
</dl>
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Print</span><span> </span><span class="coqdoc-var">id0</span><span>.</span></dt>
<dd><span class="first">id0&#64;{} = </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">pidentity</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Set} 0
     : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">nat</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">

id0 is universe polymorphic</span></dd>
</dl>
</div>
<p>This definition is elaborated by minimizing the universe of <code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">id0</span></span></code> to
level <code class="code Coq docutils literal notranslate"><span class="keyword namespace"><span class="pre">Set</span></span></code> while the more general definition would keep the fresh level
<code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">i</span></span></code> generated at the application of <code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">id</span></span></code> and a constraint that <code class="code Coq docutils literal notranslate"><span class="keyword namespace"><span class="pre">Set</span></span></code> <span class="math notranslate">\(≤ i\)</span>.
This minimization process is applied only to fresh universe variables.
It simply adds an equation between the variable and its lower bound if
it is an atomic universe (i.e. not an algebraic max() universe).</p>
<dl class="flag">
<dt id="coq:flag.universe-minimization-toset">
<em class="property"><span class="sigannot">Flag</span></em> <code class="descname"><span class="notation"><span>Universe</span> <span>Minimization</span> <span>ToSet</span></span></code><a class="headerlink" href="#coq:flag.universe-minimization-toset" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Turning this flag off (it is on by default) disallows minimization
to the sort <code class="code Coq docutils literal notranslate"><span class="keyword namespace"><span class="pre">Set</span></span></code> and only collapses floating universes between
themselves.</p>
</dd></dl>

</div>
<div class="section" id="explicit-universes">
<h2>Explicit Universes<a class="headerlink" href="#explicit-universes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The syntax has been extended to allow users to explicitly bind names
to universes and explicitly instantiate polymorphic definitions.</p>
<dl class="cmd">
<dt id="coq:cmd.universe">
<em class="property"><span class="sigannot">Command</span></em> <code class="descname"><span class="notation"><span>Universe</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a></span></code><a class="headerlink" href="#coq:cmd.universe" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>In the monorphic case, this command declares a new global universe
named <code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">ident</span></span></code>, which can be referred to using its qualified name
as well. Global universe names live in a separate namespace. The
command supports the polymorphic flag only in sections, meaning the
universe quantification will be discharged on each section definition
independently. One cannot mix polymorphic and monomorphic
declarations in the same section.</p>
</dd></dl>

<dl class="cmd">
<dt id="coq:cmd.constraint">
<em class="property"><span class="sigannot">Command</span></em> <code class="descname"><span class="notation"><span>Constraint</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a> <span class="hole">ord</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a></span></code><a class="headerlink" href="#coq:cmd.constraint" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>This command declares a new constraint between named universes. The
order relation <code class="docutils literal notranslate"><span class="notation"><span class="hole"><span class="pre">ord</span></span></span></code> can be one of <span class="math notranslate">\(&lt;\)</span>, <span class="math notranslate">\(≤\)</span> or <span class="math notranslate">\(=\)</span>. If consistent, the constraint
is then enforced in the global environment. Like <code class="docutils literal notranslate"><span class="pre">Universe</span></code>, it can be
used with the <code class="docutils literal notranslate"><span class="pre">Polymorphic</span></code> prefix in sections only to declare
constraints discharged at section closing time. One cannot declare a
global constraint on polymorphic universes.</p>
<dl class="exn">
<dt id="coq:exn.undeclared-universe-ident">
<em class="property"><span class="sigannot">Error</span></em> <code class="descname"><span class="notation"><span>Undeclared</span> <span>universe</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a><span>.</span></span></code><a class="headerlink" href="#coq:exn.undeclared-universe-ident" title="この定義へのパーマリンク">¶</a></dt>
<dd></dd></dl>

<dl class="exn">
<dt id="coq:exn.universe-inconsistency">
<em class="property"><span class="sigannot">Error</span></em> <code class="descname"><span class="notation"><span>Universe</span> <span>inconsistency.</span></span></code><a class="headerlink" href="#coq:exn.universe-inconsistency" title="この定義へのパーマリンク">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<div class="section" id="polymorphic-definitions">
<h3>Polymorphic definitions<a class="headerlink" href="#polymorphic-definitions" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>For polymorphic definitions, the declaration of (all) universe levels
introduced by a definition uses the following syntax:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-var">Polymorphic</span><span> </span><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">le&#64;</span><span>{</span><span class="coqdoc-var">i</span><span> </span><span class="coqdoc-var">j</span><span>} (</span><span class="coqdoc-var">A</span><span> : </span><span class="coqdoc-var">Type&#64;</span><span>{</span><span class="coqdoc-var">i</span><span>}) : </span><span class="coqdoc-var">Type&#64;</span><span>{</span><span class="coqdoc-var">j</span><span>} := </span><span class="coqdoc-var">A</span><span>.</span></dt>
<dd class="coqtop-hidden"><span class="first last">le is defined</span></dd>
</dl>
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Print</span><span> </span><span class="coqdoc-var">le</span><span>.</span></dt>
<dd><span class="first">le&#64;{i j} = 
</span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">fun</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> A : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{i} =&gt; </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
     : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{i}</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&#64;{j}
(* i j |= i &lt;= j
           *)

le is universe polymorphic
Argument scope is [type_scope]</span></dd>
</dl>
</div>
<p>During refinement we find that <code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">j</span></span></code> must be larger or equal than <code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">i</span></span></code>, as we
are using <code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">A</span></span> <span class="operator"><span class="pre">:</span></span> <span class="keyword type"><span class="pre">Type</span></span><span class="operator"><span class="pre">&#64;{</span></span><span class="name"><span class="pre">i</span></span><span class="operator"><span class="pre">}</span></span> <span class="operator"><span class="pre">&lt;=</span></span> <span class="keyword type"><span class="pre">Type</span></span><span class="operator"><span class="pre">&#64;{</span></span><span class="name"><span class="pre">j</span></span><span class="operator"><span class="pre">}</span></span></code>, hence the generated constraint. At the
end of a definition or proof, we check that the only remaining
universes are the ones declared. In the term and in general in proof
mode, introduced universe names can be referred to in terms. Note that
local universe names shadow global universe names. During a proof, one
can use <a class="reference internal" href="../proof-engine/proof-handling.html#coq:cmdv.show-universes" title="Show Universes"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Show</span> <span class="pre">Universes</span></code></a> to display the current context of universes.</p>
<p>Definitions can also be instantiated explicitly, giving their full
instance:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Check</span><span> (</span><span class="coqdoc-var">pidentity&#64;</span><span>{</span><span class="coqdoc-keyword">Set</span><span>}).</span></dt>
<dd><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative first">pidentity</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Set}
     : </span><span class="ansi-fg-light-blue ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">?A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-blue ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">?A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
where
?A : [ |- </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Set</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">]</span></dd>
<dt><span class="coqdoc-var">Monomorphic</span><span> </span><span class="coqdoc-keyword">Universes</span><span> </span><span class="coqdoc-var">k</span><span> </span><span class="coqdoc-var">l</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Check</span><span> (</span><span class="coqdoc-var">le&#64;</span><span>{</span><span class="coqdoc-var">k</span><span> </span><span class="coqdoc-var">l</span><span>}).</span></dt>
<dd><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative first">le</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{k l}
     : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{k}</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&#64;{l}
(* {} |= k &lt;= l
          *)</span></dd>
</dl>
</div>
<p>User-named universes and the anonymous universe implicitly attached to
an explicit <code class="code Coq docutils literal notranslate"><span class="keyword type"><span class="pre">Type</span></span></code> are considered rigid for unification and are never
minimized. Flexible anonymous universes can be produced with an
underscore or by omitting the annotation to a polymorphic definition.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Check</span><span> (</span><span class="coqdoc-keyword">fun</span><span> </span><span class="coqdoc-var">x</span><span> =&gt; </span><span class="coqdoc-var">x</span><span>) : </span><span class="coqdoc-keyword">Type</span><span> -&gt; </span><span class="coqdoc-keyword">Type</span><span>.</span></dt>
<dd><span class="first">(</span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">fun</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> x : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.50} =&gt; </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">) : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.50}</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.51}
     : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.50}</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&#64;{Top.51}
(* {Top.51 Top.50} |= Top.50 &lt;= Top.51
                       *)</span></dd>
<dt><span class="coqdoc-keyword">Check</span><span> (</span><span class="coqdoc-keyword">fun</span><span> </span><span class="coqdoc-var">x</span><span> =&gt; </span><span class="coqdoc-var">x</span><span>) : </span><span class="coqdoc-keyword">Type</span><span> -&gt; </span><span class="coqdoc-var">Type&#64;</span><span>{</span><span class="coqdoc-var">_</span><span>}.</span></dt>
<dd><span class="first">(</span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">fun</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> x : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.52} =&gt; </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">) : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.52}</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.52}
     : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.52}</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&#64;{Top.52}
(* {Top.52} |=  *)</span></dd>
<dt><span class="coqdoc-keyword">Check</span><span> </span><span class="coqdoc-var">le&#64;</span><span>{</span><span class="coqdoc-var">k</span><span> </span><span class="coqdoc-var">_</span><span>}.</span></dt>
<dd><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative first">le</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{k k}
     : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{k}</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&#64;{k}</span></dd>
<dt><span class="coqdoc-keyword">Check</span><span> </span><span class="coqdoc-var">le</span><span>.</span></dt>
<dd><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative first">le</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.55 Top.55}
     : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&#64;{Top.55}</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&#64;{Top.55}
(* {Top.55} |=  *)</span></dd>
</dl>
</div>
<dl class="flag">
<dt id="coq:flag.strict-universe-declaration">
<em class="property"><span class="sigannot">Flag</span></em> <code class="descname"><span class="notation"><span>Strict</span> <span>Universe</span> <span>Declaration</span></span></code><a class="headerlink" href="#coq:flag.strict-universe-declaration" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>Turning this option off allows one to freely use
identifiers for universes without declaring them first, with the
semantics that the first use declares it. In this mode, the universe
names are not associated with the definition or proof once it has been
defined. This is meant mainly for debugging purposes.</p>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../zebibliography.html" class="btn btn-neutral float-right" title="Bibliography" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="miscellaneous-extensions.html" class="btn btn-neutral" title="Miscellaneous extensions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 1999-2018, Inria.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'8.8.2',
            LANGUAGE:'ja',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/notations.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>