

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ja" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ja" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Canonical Structures &mdash; Coq 8.8.2 ドキュメント</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/fonts.css" type="text/css" />
  <link rel="stylesheet" href="../_static/ansi.css" type="text/css" />
  <link rel="stylesheet" href="../_static/coqdoc.css" type="text/css" />
  <link rel="stylesheet" href="../_static/notations.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pre-text.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="Type Classes" href="type-classes.html" />
    <link rel="prev" title="Implicit Coercions" href="implicit-coercions.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Coq
          

          
          </a>

          
            
            
              <div class="version">
                8.8.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">索引</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-cmdindex.html">Command index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-tacindex.html">Tactic index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-optindex.html">Flags, options and tables index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-exnindex.html">Errors and warnings index</a></li>
</ul>
<p class="caption"><span class="caption-text">はじめに</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">はじめに</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
</ul>
<p class="caption"><span class="caption-text">言語</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/gallina-specification-language.html">The Gallina specification language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/gallina-extensions.html">Extensions of <span class="smallcaps">Gallina</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/coq-library.html">The <span class="smallcaps">Coq</span> library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/cic.html">Calculus of Inductive Constructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/module-system.html">The Module System</a></li>
</ul>
<p class="caption"><span class="caption-text">証明エンジン</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/vernacular-commands.html">Vernacular commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/proof-handling.html">Proof handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/tactics.html">Tactics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/ltac.html">The tactic language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/detailed-tactic-examples.html">Detailed examples of tactics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html">The <span class="smallcaps">SSReflect</span> proof language</a></li>
</ul>
<p class="caption"><span class="caption-text">ユーザ拡張</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user-extensions/syntax-extensions.html">Syntax extensions and interpretation scopes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-extensions/proof-schemes.html">Proof schemes</a></li>
</ul>
<p class="caption"><span class="caption-text">実用ツール</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../practical-tools/coq-commands.html">The <span class="smallcaps">Coq</span> commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practical-tools/utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practical-tools/coqide.html"><span class="smallcaps">Coq</span> Integrated Development Environment</a></li>
</ul>
<p class="caption"><span class="caption-text">付録</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="extended-pattern-matching.html">Extended pattern matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="implicit-coercions.html">Implicit Coercions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Canonical Structures</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#notation-overloading">Notation overloading</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#derived-canonical-structures">Derived Canonical Structures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#hierarchy-of-structures">Hierarchy of structures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#compact-declaration-of-canonical-structures">Compact declaration of Canonical Structures</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="type-classes.html">Type Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="omega.html">Omega: a solver for quantifier-free problems in Presburger Arithmetic</a></li>
<li class="toctree-l1"><a class="reference internal" href="micromega.html">Micromega: tactics for solving arithmetic goals over ordered rings</a></li>
<li class="toctree-l1"><a class="reference internal" href="extraction.html">Extraction of programs in <span class="smallcaps">OCaml</span> and Haskell</a></li>
<li class="toctree-l1"><a class="reference internal" href="program.html">Program</a></li>
<li class="toctree-l1"><a class="reference internal" href="ring.html">The ring and field tactic families</a></li>
<li class="toctree-l1"><a class="reference internal" href="nsatz.html">Nsatz: tactics for proving equalities in integral domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="generalized-rewriting.html">Generalized rewriting</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallel-proof-processing.html">Asynchronous and Parallel Proof Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="miscellaneous-extensions.html">Miscellaneous extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="universe-polymorphism.html">Polymorphic Universes</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../zebibliography.html">Bibliography</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Coq</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Canonical Structures</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/coq/coq/blob/master/doc/sphinx/addendum/canonical-structures.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="math-preamble math notranslate">
\[\begin{split}\newcommand{\alors}{\textsf{then}}
\newcommand{\alter}{\textsf{alter}}
\newcommand{\as}{\kw{as}}
\newcommand{\Assum}[3]{\kw{Assum}(#1)(#2:#3)}
\newcommand{\bool}{\textsf{bool}}
\newcommand{\case}{\kw{case}}
\newcommand{\conc}{\textsf{conc}}
\newcommand{\cons}{\textsf{cons}}
\newcommand{\consf}{\textsf{consf}}
\newcommand{\conshl}{\textsf{cons\_hl}}
\newcommand{\Def}[4]{\kw{Def}(#1)(#2:=#3:#4)}
\newcommand{\emptyf}{\textsf{emptyf}}
\newcommand{\End}{\kw{End}}
\newcommand{\kwend}{\kw{end}}
\newcommand{\EqSt}{\textsf{EqSt}}
\newcommand{\even}{\textsf{even}}
\newcommand{\evenO}{\textsf{even}_\textsf{O}}
\newcommand{\evenS}{\textsf{even}_\textsf{S}}
\newcommand{\false}{\textsf{false}}
\newcommand{\filter}{\textsf{filter}}
\newcommand{\Fix}{\kw{Fix}}
\newcommand{\fix}{\kw{fix}}
\newcommand{\for}{\textsf{for}}
\newcommand{\forest}{\textsf{forest}}
\newcommand{\from}{\textsf{from}}
\newcommand{\Functor}{\kw{Functor}}
\newcommand{\haslength}{\textsf{has\_length}}
\newcommand{\hd}{\textsf{hd}}
\newcommand{\ident}{\textsf{ident}}
\newcommand{\In}{\kw{in}}
\newcommand{\Ind}[4]{\kw{Ind}[#2](#3:=#4)}
\newcommand{\ind}[3]{\kw{Ind}~[#1]\left(#2\mathrm{~:=~}#3\right)}
\newcommand{\Indp}[5]{\kw{Ind}_{#5}(#1)[#2](#3:=#4)}
\newcommand{\Indpstr}[6]{\kw{Ind}_{#5}(#1)[#2](#3:=#4)/{#6}}
\newcommand{\injective}{\kw{injective}}
\newcommand{\kw}[1]{\textsf{#1}}
\newcommand{\lb}{\lambda}
\newcommand{\length}{\textsf{length}}
\newcommand{\letin}[3]{\kw{let}~#1:=#2~\kw{in}~#3}
\newcommand{\List}{\textsf{list}}
\newcommand{\lra}{\longrightarrow}
\newcommand{\Match}{\kw{match}}
\newcommand{\Mod}[3]{{\kw{Mod}}({#1}:{#2}\,\zeroone{:={#3}})}
\newcommand{\ModA}[2]{{\kw{ModA}}({#1}=={#2})}
\newcommand{\ModS}[2]{{\kw{Mod}}({#1}:{#2})}
\newcommand{\ModType}[2]{{\kw{ModType}}({#1}:={#2})}
\newcommand{\mto}{.\;}
\newcommand{\Nat}{\mathbb{N}}
\newcommand{\nat}{\textsf{nat}}
\newcommand{\Nil}{\textsf{nil}}
\newcommand{\nilhl}{\textsf{nil\_hl}}
\newcommand{\nO}{\textsf{O}}
\newcommand{\node}{\textsf{node}}
\newcommand{\nS}{\textsf{S}}
\newcommand{\odd}{\textsf{odd}}
\newcommand{\oddS}{\textsf{odd}_\textsf{S}}
\newcommand{\ovl}[1]{\overline{#1}}
\newcommand{\Pair}{\textsf{pair}}
\newcommand{\Prod}{\textsf{prod}}
\newcommand{\Prop}{\textsf{Prop}}
\newcommand{\return}{\kw{return}}
\newcommand{\Set}{\textsf{Set}}
\newcommand{\si}{\textsf{if}}
\newcommand{\sinon}{\textsf{else}}
\newcommand{\Sort}{\cal S}
\newcommand{\Str}{\textsf{Stream}}
\newcommand{\Struct}{\kw{Struct}}
\newcommand{\subst}[3]{#1\{#2/#3\}}
\newcommand{\tl}{\textsf{tl}}
\newcommand{\tree}{\textsf{tree}}
\newcommand{\true}{\textsf{true}}
\newcommand{\Type}{\textsf{Type}}
\newcommand{\unfold}{\textsf{unfold}}
\newcommand{\WEV}[3]{\mbox{$#1[] \vdash #2 \lra  #3$}}
\newcommand{\WEVT}[3]{\mbox{$#1[] \vdash #2 \lra$}\\ \mbox{$ #3$}}
\newcommand{\WF}[2]{{\cal W\!F}(#1)[#2]}
\newcommand{\WFE}[1]{\WF{E}{#1}}
\newcommand{\WFT}[2]{#1[] \vdash {\cal W\!F}(#2)}
\newcommand{\WFTWOLINES}[2]{{\cal W\!F}\begin{array}{l}(#1)\\\mbox{}[{#2}]\end{array}}
\newcommand{\with}{\kw{with}}
\newcommand{\WS}[3]{#1[] \vdash #2 &lt;: #3}
\newcommand{\WSE}[2]{\WS{E}{#1}{#2}}
\newcommand{\WT}[4]{#1[#2] \vdash #3 : #4}
\newcommand{\WTE}[3]{\WT{E}{#1}{#2}{#3}}
\newcommand{\WTEG}[2]{\WTE{\Gamma}{#1}{#2}}
\newcommand{\WTM}[3]{\WT{#1}{}{#2}{#3}}
\newcommand{\zeroone}[1]{[{#1}]}
\newcommand{\zeros}{\textsf{zeros}}
\end{split}\]</div>
<div class="section" id="canonical-structures">
<span id="canonicalstructures"></span><h1>Canonical Structures<a class="headerlink" href="#canonical-structures" title="このヘッドラインへのパーマリンク">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Authors:</th><td class="field-body">Assia Mahboubi and Enrico Tassi</td>
</tr>
</tbody>
</table>
<p>This chapter explains the basics of canonical structures and how they can be used
to overload notations and build a hierarchy of algebraic structures. The
examples are taken from <a class="reference internal" href="../zebibliography.html#cswcu" id="id1">[MT13]</a>. We invite the interested reader to refer
to this paper for all the details that are omitted here for brevity. The
interested reader shall also find in <a class="reference internal" href="../zebibliography.html#cslessadhoc" id="id2">[GZND11]</a> a detailed description
of another, complementary, use of canonical structures: advanced proof search.
This latter papers also presents many techniques one can employ to tune the
inference of canonical structures.</p>
<div class="section" id="notation-overloading">
<h2>Notation overloading<a class="headerlink" href="#notation-overloading" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>We build an infix notation == for a comparison predicate. Such
notation will be overloaded, and its meaning will depend on the types
of the terms that are compared.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Module</span><span> </span><span class="coqdoc-var">EQ</span><span>.</span></dt>
<dd><span class="first last">Interactive Module EQ started</span></dd>
<dt><span class="coqdoc-keyword">Record</span><span> </span><span class="coqdoc-var">class</span><span> (</span><span class="coqdoc-var">T</span><span> : </span><span class="coqdoc-keyword">Type</span><span>) := </span><span class="coqdoc-keyword">Class</span><span> { </span><span class="coqdoc-var">cmp</span><span> : </span><span class="coqdoc-var">T</span><span> -&gt; </span><span class="coqdoc-var">T</span><span> -&gt; </span><span class="coqdoc-keyword">Prop</span><span> }.</span></dt>
<dd><span class="first last">class is defined
cmp is defined</span></dd>
<dt><span class="coqdoc-keyword">Structure</span><span> </span><span class="coqdoc-keyword">type</span><span> := </span><span class="coqdoc-var">Pack</span><span> { </span><span class="coqdoc-var">obj</span><span> : </span><span class="coqdoc-keyword">Type</span><span>; </span><span class="coqdoc-var">class_of</span><span> : </span><span class="coqdoc-var">class</span><span> </span><span class="coqdoc-var">obj</span><span> }.</span></dt>
<dd><span class="first last">type is defined
obj is defined
class_of is defined</span></dd>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">op</span><span> (</span><span class="coqdoc-var">e</span><span> : </span><span class="coqdoc-keyword">type</span><span>) : </span><span class="coqdoc-var">obj</span><span> </span><span class="coqdoc-var">e</span><span> -&gt; </span><span class="coqdoc-var">obj</span><span> </span><span class="coqdoc-var">e</span><span> -&gt; </span><span class="coqdoc-keyword">Prop</span><span> :=</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="coqdoc-keyword">let</span><span> '</span><span class="coqdoc-var">Pack</span><span> </span><span class="coqdoc-var">_</span><span> (</span><span class="coqdoc-keyword">Class</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">the_cmp</span><span>) := </span><span class="coqdoc-var">e</span><span> </span><span class="coqdoc-tactic">in</span><span> </span><span class="coqdoc-var">the_cmp</span><span>.</span></dt>
<dd><span class="first last">op is defined</span></dd>
<dt><span class="coqdoc-keyword">Check</span><span> </span><span class="coqdoc-var">op</span><span>.</span></dt>
<dd><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative first">op</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
     : </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">forall</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> e : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">, </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Prop</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
<dt><span class="coqdoc-var">Arguments</span><span> </span><span class="coqdoc-var">op</span><span> {</span><span class="coqdoc-var">e</span><span>} </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> : </span><span class="coqdoc-tactic">simpl</span><span> </span><span class="coqdoc-var">never</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-var">Arguments</span><span> </span><span class="coqdoc-keyword">Class</span><span> {</span><span class="coqdoc-var">T</span><span>} </span><span class="coqdoc-var">cmp</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Module</span><span> </span><span class="coqdoc-var">theory</span><span>.</span></dt>
<dd><span class="first last">Interactive Module theory started</span></dd>
<dt><span class="coqdoc-keyword">Notation</span><span> &quot;x == y&quot; := (</span><span class="coqdoc-var">op</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span>) (</span><span class="coqdoc-tactic">at</span><span> </span><span class="coqdoc-keyword">level</span><span> 70).</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">End</span><span> </span><span class="coqdoc-var">theory</span><span>.</span></dt>
<dd><span class="first last">Module theory is defined</span></dd>
<dt><span class="coqdoc-keyword">End</span><span> </span><span class="coqdoc-var">EQ</span><span>.</span></dt>
<dd><span class="first last">Module EQ is defined</span></dd>
</dl>
</div>
<p>We use Coq modules as namespaces. This allows us to follow the same
pattern and naming convention for the rest of the chapter. The base
namespace contains the definitions of the algebraic structure. To
keep the example small, the algebraic structure <code class="docutils literal notranslate"><span class="pre">EQ.type</span></code> we are
defining is very simplistic, and characterizes terms on which a binary
relation is defined, without requiring such relation to validate any
property. The inner theory module contains the overloaded notation <code class="docutils literal notranslate"><span class="pre">==</span></code>
and will eventually contain lemmas holding all the instances of the
algebraic structure (in this case there are no lemmas).</p>
<p>Note that in practice the user may want to declare <code class="docutils literal notranslate"><span class="pre">EQ.obj</span></code> as a
coercion, but we will not do that here.</p>
<p>The following line tests that, when we assume a type <code class="docutils literal notranslate"><span class="pre">e</span></code> that is in
theEQ class, we can relate two of its objects with <code class="docutils literal notranslate"><span class="pre">==</span></code>.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">EQ.theory</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Check</span><span> </span><span class="coqdoc-keyword">forall</span><span> (</span><span class="coqdoc-var">e</span><span> : </span><span class="coqdoc-var">EQ.type</span><span>) (</span><span class="coqdoc-var">a</span><span> </span><span class="coqdoc-var">b</span><span> : </span><span class="coqdoc-var">EQ.obj</span><span> </span><span class="coqdoc-var">e</span><span>), </span><span class="coqdoc-var">a</span><span> == </span><span class="coqdoc-var">b</span><span>.</span></dt>
<dd><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative first">forall</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> (e : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">) (a b : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">), </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">a</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> ==</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">b</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
     : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Prop</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
</dl>
</div>
<p>Still, no concrete type is in the <code class="docutils literal notranslate"><span class="pre">EQ</span></code> class.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-var">Fail</span><span> </span><span class="coqdoc-keyword">Check</span><span> 3 == 3.</span></dt>
<dd><span class="first">The command has indeed failed with message:
The term &quot;3&quot; has type &quot;</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">nat</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&quot; while it is expected to have type &quot;</span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-blue ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">?e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&quot;.</span></dd>
</dl>
</div>
<p>We amend that by equipping <code class="docutils literal notranslate"><span class="pre">nat</span></code> with a comparison relation.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">nat_eq</span><span> (</span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> : </span><span class="coqdoc-var">nat</span><span>) := </span><span class="coqdoc-var">Nat.compare</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> = </span><span class="coqdoc-var">Eq</span><span>.</span></dt>
<dd><span class="first last">nat_eq is defined</span></dd>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">nat_EQcl</span><span> : </span><span class="coqdoc-var">EQ.class</span><span> </span><span class="coqdoc-var">nat</span><span> := </span><span class="coqdoc-var">EQ.Class</span><span> </span><span class="coqdoc-var">nat_eq</span><span>.</span></dt>
<dd><span class="first last">nat_EQcl is defined</span></dd>
<dt><span class="coqdoc-keyword">Canonical</span><span> </span><span class="coqdoc-keyword">Structure</span><span> </span><span class="coqdoc-var">nat_EQty</span><span> : </span><span class="coqdoc-var">EQ.type</span><span> := </span><span class="coqdoc-var">EQ.Pack</span><span> </span><span class="coqdoc-var">nat</span><span> </span><span class="coqdoc-var">nat_EQcl</span><span>.</span></dt>
<dd><span class="first last">nat_EQty is defined</span></dd>
<dt><span class="coqdoc-keyword">Check</span><span> 3 == 3.</span></dt>
<dd><span class="first">3</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> ==</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> 3
     : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Prop</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
<dt><span class="coqdoc-keyword">Eval</span><span> </span><span class="coqdoc-tactic">compute</span><span> </span><span class="coqdoc-tactic">in</span><span> 3 == 4.</span></dt>
<dd><span class="first">     = </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">Lt</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> =</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">Eq</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
     : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Prop</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
</dl>
</div>
<p>This last test shows that <span class="smallcaps">Coq</span> is now not only able to type check <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">==</span> <span class="pre">3</span></code>,
but also that the infix relation was bound to the <code class="docutils literal notranslate"><span class="pre">nat_eq</span></code> relation.
This relation is selected whenever <code class="docutils literal notranslate"><span class="pre">==</span></code> is used on terms of type nat.
This can be read in the line declaring the canonical structure
<code class="docutils literal notranslate"><span class="pre">nat_EQty</span></code>, where the first argument to <code class="docutils literal notranslate"><span class="pre">Pack</span></code> is the key and its second
argument a group of canonical values associated to the key. In this
case we associate to nat only one canonical value (since its class,
<code class="docutils literal notranslate"><span class="pre">nat_EQcl</span></code> has just one member). The use of the projection <code class="docutils literal notranslate"><span class="pre">op</span></code> requires
its argument to be in the class <code class="docutils literal notranslate"><span class="pre">EQ</span></code>, and uses such a member (function)
to actually compare its arguments.</p>
<p>Similarly, we could equip any other type with a comparison relation,
and use the <code class="docutils literal notranslate"><span class="pre">==</span></code> notation on terms of this type.</p>
<div class="section" id="derived-canonical-structures">
<h3>Derived Canonical Structures<a class="headerlink" href="#derived-canonical-structures" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>We know how to use <code class="docutils literal notranslate"><span class="pre">==</span> <span class="pre">``</span> <span class="pre">on</span> <span class="pre">base</span> <span class="pre">types,</span> <span class="pre">like</span> <span class="pre">``nat</span></code>, <code class="docutils literal notranslate"><span class="pre">bool</span></code>, <code class="docutils literal notranslate"><span class="pre">Z</span></code>. Here we show
how to deal with type constructors, i.e. how to make the following
example work:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-var">Fail</span><span> </span><span class="coqdoc-keyword">Check</span><span> </span><span class="coqdoc-keyword">forall</span><span> (</span><span class="coqdoc-var">e</span><span> : </span><span class="coqdoc-var">EQ.type</span><span>) (</span><span class="coqdoc-var">a</span><span> </span><span class="coqdoc-var">b</span><span> : </span><span class="coqdoc-var">EQ.obj</span><span> </span><span class="coqdoc-var">e</span><span>), (</span><span class="coqdoc-var">a</span><span>, </span><span class="coqdoc-var">b</span><span>) == (</span><span class="coqdoc-var">a</span><span>, </span><span class="coqdoc-var">b</span><span>).</span></dt>
<dd><span class="first">The command has indeed failed with message:
In environment
e : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
a : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
b : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
The term &quot;</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">(</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">a</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">,</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">b</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">)</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&quot; has type &quot;(</span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> *</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">)%type&quot;
while it is expected to have type &quot;</span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-blue ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">?e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&quot;.</span></dd>
</dl>
</div>
<p>The error message is telling that <span class="smallcaps">Coq</span> has no idea on how to compare
pairs of objects. The following construction is telling Coq exactly
how to do that.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">pair_eq</span><span> (</span><span class="coqdoc-var">e1</span><span> </span><span class="coqdoc-var">e2</span><span> : </span><span class="coqdoc-var">EQ.type</span><span>) (</span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> : </span><span class="coqdoc-var">EQ.obj</span><span> </span><span class="coqdoc-var">e1</span><span> * </span><span class="coqdoc-var">EQ.obj</span><span> </span><span class="coqdoc-var">e2</span><span>) :=</span><span>
&nbsp;&nbsp;</span><span class="coqdoc-var">fst</span><span> </span><span class="coqdoc-var">x</span><span> == </span><span class="coqdoc-var">fst</span><span> </span><span class="coqdoc-var">y</span><span> /\ </span><span class="coqdoc-var">snd</span><span> </span><span class="coqdoc-var">x</span><span> == </span><span class="coqdoc-var">snd</span><span> </span><span class="coqdoc-var">y</span><span>.</span></dt>
<dd><span class="first last">pair_eq is defined</span></dd>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">pair_EQcl</span><span> </span><span class="coqdoc-var">e1</span><span> </span><span class="coqdoc-var">e2</span><span> := </span><span class="coqdoc-var">EQ.Class</span><span> (</span><span class="coqdoc-var">pair_eq</span><span> </span><span class="coqdoc-var">e1</span><span> </span><span class="coqdoc-var">e2</span><span>).</span></dt>
<dd><span class="first last">pair_EQcl is defined</span></dd>
<dt><span class="coqdoc-keyword">Canonical</span><span> </span><span class="coqdoc-keyword">Structure</span><span> </span><span class="coqdoc-var">pair_EQty</span><span> (</span><span class="coqdoc-var">e1</span><span> </span><span class="coqdoc-var">e2</span><span> : </span><span class="coqdoc-var">EQ.type</span><span>) : </span><span class="coqdoc-var">EQ.type</span><span> :=</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="coqdoc-var">EQ.Pack</span><span> (</span><span class="coqdoc-var">EQ.obj</span><span> </span><span class="coqdoc-var">e1</span><span> * </span><span class="coqdoc-var">EQ.obj</span><span> </span><span class="coqdoc-var">e2</span><span>) (</span><span class="coqdoc-var">pair_EQcl</span><span> </span><span class="coqdoc-var">e1</span><span> </span><span class="coqdoc-var">e2</span><span>).</span></dt>
<dd><span class="first last">pair_EQty is defined</span></dd>
<dt><span class="coqdoc-keyword">Check</span><span> </span><span class="coqdoc-keyword">forall</span><span> (</span><span class="coqdoc-var">e</span><span> : </span><span class="coqdoc-var">EQ.type</span><span>) (</span><span class="coqdoc-var">a</span><span> </span><span class="coqdoc-var">b</span><span> : </span><span class="coqdoc-var">EQ.obj</span><span> </span><span class="coqdoc-var">e</span><span>), (</span><span class="coqdoc-var">a</span><span>, </span><span class="coqdoc-var">b</span><span>) == (</span><span class="coqdoc-var">a</span><span>, </span><span class="coqdoc-var">b</span><span>).</span></dt>
<dd><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative first">forall</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> (e : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">) (a b : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">), </span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">(</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">a</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">,</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">b</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">)</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> ==</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">(</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">a</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">,</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">b</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">)</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
     : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Prop</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
<dt><span class="coqdoc-keyword">Check</span><span> </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">n</span><span> </span><span class="coqdoc-var">m</span><span> : </span><span class="coqdoc-var">nat</span><span>, (3, 4) == (</span><span class="coqdoc-var">n</span><span>, </span><span class="coqdoc-var">m</span><span>).</span></dt>
<dd><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative first">forall</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> n m : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">nat</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">, </span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">(</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">3</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">,</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> 4</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">)</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> ==</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">(</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">,</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">)</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
     : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Prop</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
</dl>
</div>
<p>Thanks to the <code class="docutils literal notranslate"><span class="pre">pair_EQty</span></code> declaration, <span class="smallcaps">Coq</span> is able to build a comparison
relation for pairs whenever it is able to build a comparison relation
for each component of the pair. The declaration associates to the key <code class="docutils literal notranslate"><span class="pre">*</span></code>
(the type constructor of pairs) the canonical comparison
relation <code class="docutils literal notranslate"><span class="pre">pair_eq</span></code> whenever the type constructor <code class="docutils literal notranslate"><span class="pre">*</span></code> is applied to two
types being themselves in the <code class="docutils literal notranslate"><span class="pre">EQ</span></code> class.</p>
</div>
</div>
<div class="section" id="hierarchy-of-structures">
<h2>Hierarchy of structures<a class="headerlink" href="#hierarchy-of-structures" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>To get to an interesting example we need another base class to be
available. We choose the class of types that are equipped with an
order relation, to which we associate the infix <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> notation.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Module</span><span> </span><span class="coqdoc-var">LE</span><span>.</span></dt>
<dd><span class="first last">Interactive Module LE started</span></dd>
<dt><span class="coqdoc-keyword">Record</span><span> </span><span class="coqdoc-var">class</span><span> </span><span class="coqdoc-var">T</span><span> := </span><span class="coqdoc-keyword">Class</span><span> { </span><span class="coqdoc-var">cmp</span><span> : </span><span class="coqdoc-var">T</span><span> -&gt; </span><span class="coqdoc-var">T</span><span> -&gt; </span><span class="coqdoc-keyword">Prop</span><span> }.</span></dt>
<dd><span class="first last">class is defined
cmp is defined</span></dd>
<dt><span class="coqdoc-keyword">Structure</span><span> </span><span class="coqdoc-keyword">type</span><span> := </span><span class="coqdoc-var">Pack</span><span> { </span><span class="coqdoc-var">obj</span><span> : </span><span class="coqdoc-keyword">Type</span><span>; </span><span class="coqdoc-var">class_of</span><span> : </span><span class="coqdoc-var">class</span><span> </span><span class="coqdoc-var">obj</span><span> }.</span></dt>
<dd><span class="first last">type is defined
obj is defined
class_of is defined</span></dd>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">op</span><span> (</span><span class="coqdoc-var">e</span><span> : </span><span class="coqdoc-keyword">type</span><span>) : </span><span class="coqdoc-var">obj</span><span> </span><span class="coqdoc-var">e</span><span> -&gt; </span><span class="coqdoc-var">obj</span><span> </span><span class="coqdoc-var">e</span><span> -&gt; </span><span class="coqdoc-keyword">Prop</span><span> :=</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="coqdoc-keyword">let</span><span> '</span><span class="coqdoc-var">Pack</span><span> </span><span class="coqdoc-var">_</span><span> (</span><span class="coqdoc-keyword">Class</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">f</span><span>) := </span><span class="coqdoc-var">e</span><span> </span><span class="coqdoc-tactic">in</span><span> </span><span class="coqdoc-var">f</span><span>.</span></dt>
<dd><span class="first last">op is defined</span></dd>
<dt><span class="coqdoc-var">Arguments</span><span> </span><span class="coqdoc-var">op</span><span> {</span><span class="coqdoc-var">_</span><span>} </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> : </span><span class="coqdoc-tactic">simpl</span><span> </span><span class="coqdoc-var">never</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-var">Arguments</span><span> </span><span class="coqdoc-keyword">Class</span><span> {</span><span class="coqdoc-var">T</span><span>} </span><span class="coqdoc-var">cmp</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Module</span><span> </span><span class="coqdoc-var">theory</span><span>.</span></dt>
<dd><span class="first last">Interactive Module theory started</span></dd>
<dt><span class="coqdoc-keyword">Notation</span><span> &quot;x &lt;= y&quot; := (</span><span class="coqdoc-var">op</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span>) (</span><span class="coqdoc-tactic">at</span><span> </span><span class="coqdoc-keyword">level</span><span> 70).</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">End</span><span> </span><span class="coqdoc-var">theory</span><span>.</span></dt>
<dd><span class="first last">Module theory is defined</span></dd>
<dt><span class="coqdoc-keyword">End</span><span> </span><span class="coqdoc-var">LE</span><span>.</span></dt>
<dd><span class="first last">Module LE is defined</span></dd>
</dl>
</div>
<p>As before we register a canonical <code class="docutils literal notranslate"><span class="pre">LE</span></code> class for <code class="docutils literal notranslate"><span class="pre">nat</span></code>.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">LE.theory</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">nat_le</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> := </span><span class="coqdoc-var">Nat.compare</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> &lt;&gt; </span><span class="coqdoc-var">Gt</span><span>.</span></dt>
<dd><span class="first last">nat_le is defined</span></dd>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">nat_LEcl</span><span> : </span><span class="coqdoc-var">LE.class</span><span> </span><span class="coqdoc-var">nat</span><span> := </span><span class="coqdoc-var">LE.Class</span><span> </span><span class="coqdoc-var">nat_le</span><span>.</span></dt>
<dd><span class="first last">nat_LEcl is defined</span></dd>
<dt><span class="coqdoc-keyword">Canonical</span><span> </span><span class="coqdoc-keyword">Structure</span><span> </span><span class="coqdoc-var">nat_LEty</span><span> : </span><span class="coqdoc-var">LE.type</span><span> := </span><span class="coqdoc-var">LE.Pack</span><span> </span><span class="coqdoc-var">nat</span><span> </span><span class="coqdoc-var">nat_LEcl</span><span>.</span></dt>
<dd><span class="first last">nat_LEty is defined</span></dd>
</dl>
</div>
<p>And we enable <span class="smallcaps">Coq</span> to relate pair of terms with <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">pair_le</span><span> </span><span class="coqdoc-var">e1</span><span> </span><span class="coqdoc-var">e2</span><span> (</span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> : </span><span class="coqdoc-var">LE.obj</span><span> </span><span class="coqdoc-var">e1</span><span> * </span><span class="coqdoc-var">LE.obj</span><span> </span><span class="coqdoc-var">e2</span><span>) :=</span><span>
&nbsp;&nbsp;&nbsp;</span><span class="coqdoc-var">fst</span><span> </span><span class="coqdoc-var">x</span><span> &lt;= </span><span class="coqdoc-var">fst</span><span> </span><span class="coqdoc-var">y</span><span> /\ </span><span class="coqdoc-var">snd</span><span> </span><span class="coqdoc-var">x</span><span> &lt;= </span><span class="coqdoc-var">snd</span><span> </span><span class="coqdoc-var">y</span><span>.</span></dt>
<dd><span class="first last">pair_le is defined</span></dd>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">pair_LEcl</span><span> </span><span class="coqdoc-var">e1</span><span> </span><span class="coqdoc-var">e2</span><span> := </span><span class="coqdoc-var">LE.Class</span><span> (</span><span class="coqdoc-var">pair_le</span><span> </span><span class="coqdoc-var">e1</span><span> </span><span class="coqdoc-var">e2</span><span>).</span></dt>
<dd><span class="first last">pair_LEcl is defined</span></dd>
<dt><span class="coqdoc-keyword">Canonical</span><span> </span><span class="coqdoc-keyword">Structure</span><span> </span><span class="coqdoc-var">pair_LEty</span><span> (</span><span class="coqdoc-var">e1</span><span> </span><span class="coqdoc-var">e2</span><span> : </span><span class="coqdoc-var">LE.type</span><span>) : </span><span class="coqdoc-var">LE.type</span><span> :=</span><span>
&nbsp;&nbsp;&nbsp;</span><span class="coqdoc-var">LE.Pack</span><span> (</span><span class="coqdoc-var">LE.obj</span><span> </span><span class="coqdoc-var">e1</span><span> * </span><span class="coqdoc-var">LE.obj</span><span> </span><span class="coqdoc-var">e2</span><span>) (</span><span class="coqdoc-var">pair_LEcl</span><span> </span><span class="coqdoc-var">e1</span><span> </span><span class="coqdoc-var">e2</span><span>).</span></dt>
<dd><span class="first last">pair_LEty is defined</span></dd>
<dt><span class="coqdoc-keyword">Check</span><span> (3,4,5) &lt;= (3,4,5).</span></dt>
<dd><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative first">(</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">3</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">,</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> 4</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">,</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> 5</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">)</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">(</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">3</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">,</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> 4</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">,</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> 5</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">)</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
     : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Prop</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
</dl>
</div>
<p>At the current stage we can use <code class="docutils literal notranslate"><span class="pre">==</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> on concrete types, like
tuples of natural numbers, but we can’t develop an algebraic theory
over the types that are equipped with both relations.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Check</span><span> 2 &lt;= 3 /\ 2 == 2.</span></dt>
<dd><span class="first">2</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> 3</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> /\</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> 2</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> ==</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> 2
     : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Prop</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
<dt><span class="coqdoc-var">Fail</span><span> </span><span class="coqdoc-keyword">Check</span><span> </span><span class="coqdoc-keyword">forall</span><span> (</span><span class="coqdoc-var">e</span><span> : </span><span class="coqdoc-var">EQ.type</span><span>) (</span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> : </span><span class="coqdoc-var">EQ.obj</span><span> </span><span class="coqdoc-var">e</span><span>), </span><span class="coqdoc-var">x</span><span> &lt;= </span><span class="coqdoc-var">y</span><span> -&gt; </span><span class="coqdoc-var">y</span><span> &lt;= </span><span class="coqdoc-var">x</span><span> -&gt; </span><span class="coqdoc-var">x</span><span> == </span><span class="coqdoc-var">y</span><span>.</span></dt>
<dd><span class="first">The command has indeed failed with message:
In environment
e : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
x : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
y : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
The term &quot;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&quot; has type &quot;</span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&quot; while it is expected to have type
 &quot;</span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LE</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-blue ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">?e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&quot;.</span></dd>
<dt><span class="coqdoc-var">Fail</span><span> </span><span class="coqdoc-keyword">Check</span><span> </span><span class="coqdoc-keyword">forall</span><span> (</span><span class="coqdoc-var">e</span><span> : </span><span class="coqdoc-var">LE.type</span><span>) (</span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> : </span><span class="coqdoc-var">LE.obj</span><span> </span><span class="coqdoc-var">e</span><span>), </span><span class="coqdoc-var">x</span><span> &lt;= </span><span class="coqdoc-var">y</span><span> -&gt; </span><span class="coqdoc-var">y</span><span> &lt;= </span><span class="coqdoc-var">x</span><span> -&gt; </span><span class="coqdoc-var">x</span><span> == </span><span class="coqdoc-var">y</span><span>.</span></dt>
<dd><span class="first">The command has indeed failed with message:
In environment
e : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LE</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
x : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LE</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
y : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LE</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
The term &quot;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&quot; has type &quot;</span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LE</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&quot; while it is expected to have type
 &quot;</span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-blue ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">?e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&quot;.</span></dd>
</dl>
</div>
<p>We need to define a new class that inherits from both <code class="docutils literal notranslate"><span class="pre">EQ</span></code> and <code class="docutils literal notranslate"><span class="pre">LE</span></code>.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Module</span><span> </span><span class="coqdoc-var">LEQ</span><span>.</span></dt>
<dd><span class="first last">Interactive Module LEQ started</span></dd>
<dt><span class="coqdoc-keyword">Record</span><span> </span><span class="coqdoc-var">mixin</span><span> (</span><span class="coqdoc-var">e</span><span> : </span><span class="coqdoc-var">EQ.type</span><span>) (</span><span class="coqdoc-var">le</span><span> : </span><span class="coqdoc-var">EQ.obj</span><span> </span><span class="coqdoc-var">e</span><span> -&gt; </span><span class="coqdoc-var">EQ.obj</span><span> </span><span class="coqdoc-var">e</span><span> -&gt; </span><span class="coqdoc-keyword">Prop</span><span>) :=</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="coqdoc-var">Mixin</span><span> { </span><span class="coqdoc-var">compat</span><span> : </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> : </span><span class="coqdoc-var">EQ.obj</span><span> </span><span class="coqdoc-var">e</span><span>, </span><span class="coqdoc-var">le</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> /\ </span><span class="coqdoc-var">le</span><span> </span><span class="coqdoc-var">y</span><span> </span><span class="coqdoc-var">x</span><span> &lt;-&gt; </span><span class="coqdoc-var">x</span><span> == </span><span class="coqdoc-var">y</span><span> }.</span></dt>
<dd><span class="first last">mixin is defined
compat is defined</span></dd>
<dt><span class="coqdoc-keyword">Record</span><span> </span><span class="coqdoc-var">class</span><span> </span><span class="coqdoc-var">T</span><span> := </span><span class="coqdoc-keyword">Class</span><span> {</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="coqdoc-var">EQ_class</span><span> : </span><span class="coqdoc-var">EQ.class</span><span> </span><span class="coqdoc-var">T</span><span>;</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="coqdoc-var">LE_class</span><span> : </span><span class="coqdoc-var">LE.class</span><span> </span><span class="coqdoc-var">T</span><span>;</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="coqdoc-var">extra</span><span> : </span><span class="coqdoc-var">mixin</span><span> (</span><span class="coqdoc-var">EQ.Pack</span><span> </span><span class="coqdoc-var">T</span><span> </span><span class="coqdoc-var">EQ_class</span><span>) (</span><span class="coqdoc-var">LE.cmp</span><span> </span><span class="coqdoc-var">T</span><span> </span><span class="coqdoc-var">LE_class</span><span>) }.</span></dt>
<dd><span class="first last">class is defined
EQ_class is defined
LE_class is defined
extra is defined</span></dd>
<dt><span class="coqdoc-keyword">Structure</span><span> </span><span class="coqdoc-keyword">type</span><span> := </span><span class="coqdoc-var">_Pack</span><span> { </span><span class="coqdoc-var">obj</span><span> : </span><span class="coqdoc-keyword">Type</span><span>; </span><span class="coqdoc-var">class_of</span><span> : </span><span class="coqdoc-var">class</span><span> </span><span class="coqdoc-var">obj</span><span> }.</span></dt>
<dd><span class="first last">type is defined
obj is defined
class_of is defined</span></dd>
<dt><span class="coqdoc-var">Arguments</span><span> </span><span class="coqdoc-var">Mixin</span><span> {</span><span class="coqdoc-var">e</span><span> </span><span class="coqdoc-var">le</span><span>} </span><span class="coqdoc-var">_</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-var">Arguments</span><span> </span><span class="coqdoc-keyword">Class</span><span> {</span><span class="coqdoc-var">T</span><span>} </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">_</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
</dl>
</div>
<p>The mixin component of the <code class="docutils literal notranslate"><span class="pre">LEQ</span></code> class contains all the extra content we
are adding to <code class="docutils literal notranslate"><span class="pre">EQ</span></code> and <code class="docutils literal notranslate"><span class="pre">LE</span></code>. In particular it contains the requirement
that the two relations we are combining are compatible.</p>
<p>Unfortunately there is still an obstacle to developing the algebraic
theory of this new class.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Module</span><span> </span><span class="coqdoc-var">theory</span><span>.</span></dt>
<dd><span class="first last">Interactive Module theory started</span></dd>
<dt><span class="coqdoc-var">Fail</span><span> </span><span class="coqdoc-keyword">Check</span><span> </span><span class="coqdoc-keyword">forall</span><span> (</span><span class="coqdoc-var">le</span><span> : </span><span class="coqdoc-keyword">type</span><span>) (</span><span class="coqdoc-var">n</span><span> </span><span class="coqdoc-var">m</span><span> : </span><span class="coqdoc-var">obj</span><span> </span><span class="coqdoc-var">le</span><span>), </span><span class="coqdoc-var">n</span><span> &lt;= </span><span class="coqdoc-var">m</span><span> -&gt; </span><span class="coqdoc-var">n</span><span> &lt;= </span><span class="coqdoc-var">m</span><span> -&gt; </span><span class="coqdoc-var">n</span><span> == </span><span class="coqdoc-var">m</span><span>.</span></dt>
<dd><span class="first">The command has indeed failed with message:
In environment
le : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
n : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">le</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
m : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">le</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
The term &quot;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&quot; has type &quot;</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">le</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&quot; while it is expected to have type &quot;</span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LE</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-blue ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">?e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&quot;.</span></dd>
</dl>
</div>
<p>The problem is that the two classes <code class="docutils literal notranslate"><span class="pre">LE</span></code> and <code class="docutils literal notranslate"><span class="pre">LEQ</span></code> are not yet related by
a subclass relation. In other words <span class="smallcaps">Coq</span> does not see that an object of
the <code class="docutils literal notranslate"><span class="pre">LEQ</span></code> class is also an object of the <code class="docutils literal notranslate"><span class="pre">LE</span></code> class.</p>
<p>The following two constructions tell <span class="smallcaps">Coq</span> how to canonically build the
<code class="docutils literal notranslate"><span class="pre">LE.type</span></code> and <code class="docutils literal notranslate"><span class="pre">EQ.type</span></code> structure given an <code class="docutils literal notranslate"><span class="pre">LEQ.type</span></code> structure on the same
type.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">to_EQ</span><span> (</span><span class="coqdoc-var">e</span><span> : </span><span class="coqdoc-keyword">type</span><span>) : </span><span class="coqdoc-var">EQ.type</span><span> :=</span><span>
&nbsp;&nbsp;&nbsp;</span><span class="coqdoc-var">EQ.Pack</span><span> (</span><span class="coqdoc-var">obj</span><span> </span><span class="coqdoc-var">e</span><span>) (</span><span class="coqdoc-var">EQ_class</span><span> </span><span class="coqdoc-var">_</span><span> (</span><span class="coqdoc-var">class_of</span><span> </span><span class="coqdoc-var">e</span><span>)).</span></dt>
<dd><span class="first last">to_EQ is defined</span></dd>
<dt><span class="coqdoc-keyword">Canonical</span><span> </span><span class="coqdoc-keyword">Structure</span><span> </span><span class="coqdoc-var">to_EQ</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">to_LE</span><span> (</span><span class="coqdoc-var">e</span><span> : </span><span class="coqdoc-keyword">type</span><span>) : </span><span class="coqdoc-var">LE.type</span><span> :=</span><span>
&nbsp;&nbsp;&nbsp;</span><span class="coqdoc-var">LE.Pack</span><span> (</span><span class="coqdoc-var">obj</span><span> </span><span class="coqdoc-var">e</span><span>) (</span><span class="coqdoc-var">LE_class</span><span> </span><span class="coqdoc-var">_</span><span> (</span><span class="coqdoc-var">class_of</span><span> </span><span class="coqdoc-var">e</span><span>)).</span></dt>
<dd><span class="first last">to_LE is defined</span></dd>
<dt><span class="coqdoc-keyword">Canonical</span><span> </span><span class="coqdoc-keyword">Structure</span><span> </span><span class="coqdoc-var">to_LE</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
</dl>
</div>
<p>We can now formulate out first theorem on the objects of the <code class="docutils literal notranslate"><span class="pre">LEQ</span></code>
structure.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Lemma</span><span> </span><span class="coqdoc-var">lele_eq</span><span> (</span><span class="coqdoc-var">e</span><span> : </span><span class="coqdoc-keyword">type</span><span>) (</span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> : </span><span class="coqdoc-var">obj</span><span> </span><span class="coqdoc-var">e</span><span>) : </span><span class="coqdoc-var">x</span><span> &lt;= </span><span class="coqdoc-var">y</span><span> -&gt; </span><span class="coqdoc-var">y</span><span> &lt;= </span><span class="coqdoc-var">x</span><span> -&gt; </span><span class="coqdoc-var">x</span><span> == </span><span class="coqdoc-var">y</span><span>.</span></dt>
<dd><span class="first">1 subgoal
  
  e : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  x, y : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  ============================
  </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> ==</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
<dt><span class="coqdoc-var">now</span><span> </span><span class="coqdoc-tactic">intros</span><span>; </span><span class="coqdoc-tactic">apply</span><span> (</span><span class="coqdoc-var">compat</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">_</span><span> (</span><span class="coqdoc-var">extra</span><span> </span><span class="coqdoc-var">_</span><span> (</span><span class="coqdoc-var">class_of</span><span> </span><span class="coqdoc-var">e</span><span>)) </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span>); </span><span class="coqdoc-tactic">split</span><span>.</span></dt>
<dd><span class="first last">No more subgoals.</span></dd>
<dt><span class="coqdoc-keyword">Qed</span><span>.</span></dt>
<dd><span class="first last">lele_eq is defined</span></dd>
<dt><span class="coqdoc-var">Arguments</span><span> </span><span class="coqdoc-var">lele_eq</span><span> {</span><span class="coqdoc-var">e</span><span>} </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">_</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">End</span><span> </span><span class="coqdoc-var">theory</span><span>.</span></dt>
<dd><span class="first last">Module theory is defined</span></dd>
<dt><span class="coqdoc-keyword">End</span><span> </span><span class="coqdoc-var">LEQ</span><span>.</span></dt>
<dd><span class="first last">Module LEQ is defined</span></dd>
<dt><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">LEQ.theory</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Check</span><span> </span><span class="coqdoc-var">lele_eq</span><span>.</span></dt>
<dd><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative first">lele_eq</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
     : </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">forall</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> x y : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LEQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-blue ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">?e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">, </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> ==</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
where
?e : [ |- </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LEQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">]</span></dd>
</dl>
</div>
<p>Of course one would like to apply results proved in the algebraic
setting to any concrete instate of the algebraic structure.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Example</span><span> </span><span class="coqdoc-var">test_algebraic</span><span> (</span><span class="coqdoc-var">n</span><span> </span><span class="coqdoc-var">m</span><span> : </span><span class="coqdoc-var">nat</span><span>) : </span><span class="coqdoc-var">n</span><span> &lt;= </span><span class="coqdoc-var">m</span><span> -&gt; </span><span class="coqdoc-var">m</span><span> &lt;= </span><span class="coqdoc-var">n</span><span> -&gt; </span><span class="coqdoc-var">n</span><span> == </span><span class="coqdoc-var">m</span><span>.</span></dt>
<dd><span class="first">1 subgoal
  
  n, m : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">nat</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  ============================
  </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> ==</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
<dt><span class="coqdoc-var">Fail</span><span> </span><span class="coqdoc-tactic">apply</span><span> (</span><span class="coqdoc-var">lele_eq</span><span> </span><span class="coqdoc-var">n</span><span> </span><span class="coqdoc-var">m</span><span>).</span></dt>
<dd><span class="first">The command has indeed failed with message:
In environment
n, m : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">nat</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
The term &quot;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&quot; has type &quot;</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">nat</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&quot; while it is expected to have type &quot;</span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LEQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-blue ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">?e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&quot;.</span></dd>
<dt><span class="coqdoc-keyword">Abort</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Example</span><span> </span><span class="coqdoc-var">test_algebraic2</span><span> (</span><span class="coqdoc-var">l1</span><span> </span><span class="coqdoc-var">l2</span><span> : </span><span class="coqdoc-var">LEQ.type</span><span>) (</span><span class="coqdoc-var">n</span><span> </span><span class="coqdoc-var">m</span><span> : </span><span class="coqdoc-var">LEQ.obj</span><span> </span><span class="coqdoc-var">l1</span><span> * </span><span class="coqdoc-var">LEQ.obj</span><span> </span><span class="coqdoc-var">l2</span><span>) :</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="coqdoc-var">n</span><span> &lt;= </span><span class="coqdoc-var">m</span><span> -&gt; </span><span class="coqdoc-var">m</span><span> &lt;= </span><span class="coqdoc-var">n</span><span> -&gt; </span><span class="coqdoc-var">n</span><span> == </span><span class="coqdoc-var">m</span><span>.</span></dt>
<dd><span class="first">1 subgoal
  
  l1, l2 : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LEQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  n, m : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LEQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">l1</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> *</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LEQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">l2</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  ============================
  </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> ==</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
<dt><span class="coqdoc-var">Fail</span><span> </span><span class="coqdoc-tactic">apply</span><span> (</span><span class="coqdoc-var">lele_eq</span><span> </span><span class="coqdoc-var">n</span><span> </span><span class="coqdoc-var">m</span><span>).</span></dt>
<dd><span class="first">The command has indeed failed with message:
In environment
l1, l2 : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LEQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
n, m : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LEQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">l1</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> *</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LEQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">l2</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
The term &quot;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&quot; has type &quot;(</span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LEQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">l1</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> *</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LEQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">l2</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">)%type&quot;
while it is expected to have type &quot;</span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LEQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-blue ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">?e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&quot;.</span></dd>
<dt><span class="coqdoc-keyword">Abort</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
</dl>
</div>
<p>Again one has to tell <span class="smallcaps">Coq</span> that the type <code class="docutils literal notranslate"><span class="pre">nat</span></code> is in the <code class="docutils literal notranslate"><span class="pre">LEQ</span></code> class, and
how the type constructor <code class="docutils literal notranslate"><span class="pre">*</span></code> interacts with the <code class="docutils literal notranslate"><span class="pre">LEQ</span></code> class. In the
following proofs are omitted for brevity.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Lemma</span><span> </span><span class="coqdoc-var">nat_LEQ_compat</span><span> (</span><span class="coqdoc-var">n</span><span> </span><span class="coqdoc-var">m</span><span> : </span><span class="coqdoc-var">nat</span><span>) : </span><span class="coqdoc-var">n</span><span> &lt;= </span><span class="coqdoc-var">m</span><span> /\ </span><span class="coqdoc-var">m</span><span> &lt;= </span><span class="coqdoc-var">n</span><span> &lt;-&gt; </span><span class="coqdoc-var">n</span><span> == </span><span class="coqdoc-var">m</span><span>.</span></dt>
<dd><span class="first">1 subgoal
  
  n, m : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">nat</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  ============================
  </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> /\</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;-&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> ==</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
<dt><span class="coqdoc-var">Admitted</span><span>.</span></dt>
<dd><span class="first last">nat_LEQ_compat is declared</span></dd>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">nat_LEQmx</span><span> := </span><span class="coqdoc-var">LEQ.Mixin</span><span> </span><span class="coqdoc-var">nat_LEQ_compat</span><span>.</span></dt>
<dd><span class="first last">nat_LEQmx is defined</span></dd>
<dt><span class="coqdoc-keyword">Lemma</span><span> </span><span class="coqdoc-var">pair_LEQ_compat</span><span> (</span><span class="coqdoc-var">l1</span><span> </span><span class="coqdoc-var">l2</span><span> : </span><span class="coqdoc-var">LEQ.type</span><span>) (</span><span class="coqdoc-var">n</span><span> </span><span class="coqdoc-var">m</span><span> : </span><span class="coqdoc-var">LEQ.obj</span><span> </span><span class="coqdoc-var">l1</span><span> * </span><span class="coqdoc-var">LEQ.obj</span><span> </span><span class="coqdoc-var">l2</span><span>) :</span><span>
&nbsp;&nbsp;&nbsp;</span><span class="coqdoc-var">n</span><span> &lt;= </span><span class="coqdoc-var">m</span><span> /\ </span><span class="coqdoc-var">m</span><span> &lt;= </span><span class="coqdoc-var">n</span><span> &lt;-&gt; </span><span class="coqdoc-var">n</span><span> == </span><span class="coqdoc-var">m</span><span>.</span></dt>
<dd><span class="first">1 subgoal
  
  l1, l2 : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LEQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  n, m : </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LEQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">l1</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> *</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">LEQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">l2</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  ============================
  </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> /\</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;-&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> ==</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
<dt><span class="coqdoc-var">Admitted</span><span>.</span></dt>
<dd><span class="first last">pair_LEQ_compat is declared</span></dd>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">pair_LEQmx</span><span> </span><span class="coqdoc-var">l1</span><span> </span><span class="coqdoc-var">l2</span><span> := </span><span class="coqdoc-var">LEQ.Mixin</span><span> (</span><span class="coqdoc-var">pair_LEQ_compat</span><span> </span><span class="coqdoc-var">l1</span><span> </span><span class="coqdoc-var">l2</span><span>).</span></dt>
<dd><span class="first last">pair_LEQmx is defined</span></dd>
</dl>
</div>
<p>The following script registers an <code class="docutils literal notranslate"><span class="pre">LEQ</span></code> class for <code class="docutils literal notranslate"><span class="pre">nat</span></code> and for the type
constructor <code class="docutils literal notranslate"><span class="pre">*</span></code>. It also tests that they work as expected.</p>
<p>Unfortunately, these declarations are very verbose. In the following
subsection we show how to make them more compact.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Module</span><span> </span><span class="coqdoc-var">Add_instance_attempt</span><span>.</span></dt>
<dd><span class="first last">Interactive Module Add_instance_attempt started</span></dd>
<dt><span class="coqdoc-keyword">Canonical</span><span> </span><span class="coqdoc-keyword">Structure</span><span> </span><span class="coqdoc-var">nat_LEQty</span><span> : </span><span class="coqdoc-var">LEQ.type</span><span> :=</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="coqdoc-var">LEQ._Pack</span><span> </span><span class="coqdoc-var">nat</span><span> (</span><span class="coqdoc-var">LEQ.Class</span><span> </span><span class="coqdoc-var">nat_EQcl</span><span> </span><span class="coqdoc-var">nat_LEcl</span><span> </span><span class="coqdoc-var">nat_LEQmx</span><span>).</span></dt>
<dd><span class="first last">nat_LEQty is defined</span></dd>
<dt><span class="coqdoc-keyword">Canonical</span><span> </span><span class="coqdoc-keyword">Structure</span><span> </span><span class="coqdoc-var">pair_LEQty</span><span> (</span><span class="coqdoc-var">l1</span><span> </span><span class="coqdoc-var">l2</span><span> : </span><span class="coqdoc-var">LEQ.type</span><span>) : </span><span class="coqdoc-var">LEQ.type</span><span> :=</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="coqdoc-var">LEQ._Pack</span><span> (</span><span class="coqdoc-var">LEQ.obj</span><span> </span><span class="coqdoc-var">l1</span><span> * </span><span class="coqdoc-var">LEQ.obj</span><span> </span><span class="coqdoc-var">l2</span><span>)</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="coqdoc-var">LEQ.Class</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="coqdoc-var">EQ.class_of</span><span> (</span><span class="coqdoc-var">pair_EQty</span><span> (</span><span class="coqdoc-var">to_EQ</span><span> </span><span class="coqdoc-var">l1</span><span>) (</span><span class="coqdoc-var">to_EQ</span><span> </span><span class="coqdoc-var">l2</span><span>)))</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="coqdoc-var">LE.class_of</span><span> (</span><span class="coqdoc-var">pair_LEty</span><span> (</span><span class="coqdoc-var">to_LE</span><span> </span><span class="coqdoc-var">l1</span><span>) (</span><span class="coqdoc-var">to_LE</span><span> </span><span class="coqdoc-var">l2</span><span>)))</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="coqdoc-var">pair_LEQmx</span><span> </span><span class="coqdoc-var">l1</span><span> </span><span class="coqdoc-var">l2</span><span>)).</span></dt>
<dd><span class="first">pair_LEQty is defined
Toplevel input, characters 0-264:
&gt; Canonical Structure pair_LEQty (l1 l2 : LEQ.type) : LEQ.type :=     LEQ._Pack (LEQ.obj l1 * LEQ.obj l2)       (LEQ.Class          (EQ.class_of (pair_EQty (to_EQ l1) (to_EQ l2)))          (LE.class_of (pair_LEty (to_LE l1) (to_LE l2)))          (pair_LEQmx l1 l2)).
&gt; ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
</span><span class="ansi-fg-white ansi-bg-yellow ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Warning:</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> Ignoring canonical projection to LEQ.Class by LEQ.class_of in
</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">pair_LEQty</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">: redundant with </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">nat_LEQty</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
<dt><span class="coqdoc-keyword">Example</span><span> </span><span class="coqdoc-var">test_algebraic</span><span> (</span><span class="coqdoc-var">n</span><span> </span><span class="coqdoc-var">m</span><span> : </span><span class="coqdoc-var">nat</span><span>) : </span><span class="coqdoc-var">n</span><span> &lt;= </span><span class="coqdoc-var">m</span><span> -&gt; </span><span class="coqdoc-var">m</span><span> &lt;= </span><span class="coqdoc-var">n</span><span> -&gt; </span><span class="coqdoc-var">n</span><span> == </span><span class="coqdoc-var">m</span><span>.</span></dt>
<dd><span class="first">1 subgoal
  
  n, m : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">nat</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  ============================
  </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> ==</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
<dt><span class="coqdoc-var">now</span><span> </span><span class="coqdoc-tactic">apply</span><span> (</span><span class="coqdoc-var">lele_eq</span><span> </span><span class="coqdoc-var">n</span><span> </span><span class="coqdoc-var">m</span><span>).</span></dt>
<dd><span class="first last">No more subgoals.</span></dd>
<dt><span class="coqdoc-keyword">Qed</span><span>.</span></dt>
<dd><span class="first last">test_algebraic is defined</span></dd>
<dt><span class="coqdoc-keyword">Example</span><span> </span><span class="coqdoc-var">test_algebraic2</span><span> (</span><span class="coqdoc-var">n</span><span> </span><span class="coqdoc-var">m</span><span> : </span><span class="coqdoc-var">nat</span><span> * </span><span class="coqdoc-var">nat</span><span>) : </span><span class="coqdoc-var">n</span><span> &lt;= </span><span class="coqdoc-var">m</span><span> -&gt; </span><span class="coqdoc-var">m</span><span> &lt;= </span><span class="coqdoc-var">n</span><span> -&gt; </span><span class="coqdoc-var">n</span><span> == </span><span class="coqdoc-var">m</span><span>.</span></dt>
<dd><span class="first">1 subgoal
  
  n, m : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">nat</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> *</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">nat</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  ============================
  </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &lt;=</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">n</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> ==</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">m</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
<dt><span class="coqdoc-var">now</span><span> </span><span class="coqdoc-tactic">apply</span><span> (</span><span class="coqdoc-var">lele_eq</span><span> </span><span class="coqdoc-var">n</span><span> </span><span class="coqdoc-var">m</span><span>).</span></dt>
<dd><span class="first last">No more subgoals.</span></dd>
<dt><span class="coqdoc-keyword">Qed</span><span>.</span></dt>
<dd><span class="first last">test_algebraic2 is defined</span></dd>
<dt><span class="coqdoc-keyword">End</span><span> </span><span class="coqdoc-var">Add_instance_attempt</span><span>.</span></dt>
<dd><span class="first last">Module Add_instance_attempt is defined</span></dd>
</dl>
</div>
<p>Note that no direct proof of <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">&lt;=</span> <span class="pre">m</span> <span class="pre">-&gt;</span> <span class="pre">m</span> <span class="pre">&lt;=</span> <span class="pre">n</span> <span class="pre">-&gt;</span> <span class="pre">n</span> <span class="pre">==</span> <span class="pre">m</span></code> is provided by
the user for <code class="docutils literal notranslate"><span class="pre">n</span></code> and m of type <code class="docutils literal notranslate"><span class="pre">nat</span> <span class="pre">*</span> <span class="pre">nat</span></code>. What the user provides is a
proof of this statement for <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">m</span></code> of type <code class="docutils literal notranslate"><span class="pre">nat</span></code> and a proof that the
pair constructor preserves this property. The combination of these two
facts is a simple form of proof search that <span class="smallcaps">Coq</span> performs automatically
while inferring canonical structures.</p>
<div class="section" id="compact-declaration-of-canonical-structures">
<h3>Compact declaration of Canonical Structures<a class="headerlink" href="#compact-declaration-of-canonical-structures" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>We need some infrastructure for that.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Require</span><span> </span><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">Strings.String</span><span>.</span></dt>
<dd><span class="first last">[Loading ML file z_syntax_plugin.cmxs ... done]
[Loading ML file quote_plugin.cmxs ... done]
[Loading ML file newring_plugin.cmxs ... done]
[Loading ML file ascii_syntax_plugin.cmxs ... done]
[Loading ML file string_syntax_plugin.cmxs ... done]</span></dd>
<dt><span class="coqdoc-keyword">Module</span><span> </span><span class="coqdoc-var">infrastructure</span><span>.</span></dt>
<dd><span class="first last">Interactive Module infrastructure started</span></dd>
<dt><span class="coqdoc-keyword">Inductive</span><span> </span><span class="coqdoc-var">phantom</span><span> {</span><span class="coqdoc-var">T</span><span> : </span><span class="coqdoc-keyword">Type</span><span>} (</span><span class="coqdoc-var">t</span><span> : </span><span class="coqdoc-var">T</span><span>) : </span><span class="coqdoc-keyword">Type</span><span> := </span><span class="coqdoc-var">Phantom</span><span>.</span></dt>
<dd><span class="first last">phantom is defined
phantom_rect is defined
phantom_ind is defined
phantom_rec is defined</span></dd>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">unify</span><span> {</span><span class="coqdoc-var">T1</span><span> </span><span class="coqdoc-var">T2</span><span>} (</span><span class="coqdoc-var">t1</span><span> : </span><span class="coqdoc-var">T1</span><span>) (</span><span class="coqdoc-var">t2</span><span> : </span><span class="coqdoc-var">T2</span><span>) (</span><span class="coqdoc-var">s</span><span> : </span><span class="coqdoc-var">option</span><span> </span><span class="coqdoc-var">string</span><span>) :=</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="coqdoc-var">phantom</span><span> </span><span class="coqdoc-var">t1</span><span> -&gt; </span><span class="coqdoc-var">phantom</span><span> </span><span class="coqdoc-var">t2</span><span>.</span></dt>
<dd><span class="first last">unify is defined</span></dd>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">id</span><span> {</span><span class="coqdoc-var">T</span><span>} {</span><span class="coqdoc-var">t</span><span> : </span><span class="coqdoc-var">T</span><span>} (</span><span class="coqdoc-var">x</span><span> : </span><span class="coqdoc-var">phantom</span><span> </span><span class="coqdoc-var">t</span><span>) := </span><span class="coqdoc-var">x</span><span>.</span></dt>
<dd><span class="first last">id is defined</span></dd>
<dt><span class="coqdoc-keyword">Notation</span><span> &quot;[find v | t1 ~ t2 ] p&quot; := (</span><span class="coqdoc-keyword">fun</span><span> </span><span class="coqdoc-var">v</span><span> (</span><span class="coqdoc-var">_</span><span> : </span><span class="coqdoc-var">unify</span><span> </span><span class="coqdoc-var">t1</span><span> </span><span class="coqdoc-var">t2</span><span> </span><span class="coqdoc-var">None</span><span>) =&gt; </span><span class="coqdoc-var">p</span><span>)</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="coqdoc-tactic">at</span><span> </span><span class="coqdoc-keyword">level</span><span> 50, </span><span class="coqdoc-var">v</span><span> </span><span class="coqdoc-var">ident</span><span>, </span><span class="coqdoc-var">only</span><span> </span><span class="coqdoc-var">parsing</span><span>).</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Notation</span><span> &quot;[find v | t1 ~ t2 | s ] p&quot; := (</span><span class="coqdoc-keyword">fun</span><span> </span><span class="coqdoc-var">v</span><span> (</span><span class="coqdoc-var">_</span><span> : </span><span class="coqdoc-var">unify</span><span> </span><span class="coqdoc-var">t1</span><span> </span><span class="coqdoc-var">t2</span><span> (</span><span class="coqdoc-var">Some</span><span> </span><span class="coqdoc-var">s</span><span>)) =&gt; </span><span class="coqdoc-var">p</span><span>)</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="coqdoc-tactic">at</span><span> </span><span class="coqdoc-keyword">level</span><span> 50, </span><span class="coqdoc-var">v</span><span> </span><span class="coqdoc-var">ident</span><span>, </span><span class="coqdoc-var">only</span><span> </span><span class="coqdoc-var">parsing</span><span>).</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Notation</span><span> &quot;'Error : t : s&quot; := (</span><span class="coqdoc-var">unify</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">t</span><span> (</span><span class="coqdoc-var">Some</span><span> </span><span class="coqdoc-var">s</span><span>))</span><span>
&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="coqdoc-tactic">at</span><span> </span><span class="coqdoc-keyword">level</span><span> 50, </span><span class="coqdoc-var">format</span><span> &quot;''Error' : t : s&quot;).</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Open</span><span> </span><span class="coqdoc-keyword">Scope</span><span> </span><span class="coqdoc-var">string_scope</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">End</span><span> </span><span class="coqdoc-var">infrastructure</span><span>.</span></dt>
<dd><span class="first last">Module infrastructure is defined</span></dd>
</dl>
</div>
<p>To explain the notation <code class="docutils literal notranslate"><span class="pre">[find</span> <span class="pre">v</span> <span class="pre">|</span> <span class="pre">t1</span> <span class="pre">~</span> <span class="pre">t2]</span></code> let us pick one of its
instances: <code class="docutils literal notranslate"><span class="pre">[find</span> <span class="pre">e</span> <span class="pre">|</span> <span class="pre">EQ.obj</span> <span class="pre">e</span> <span class="pre">~</span> <span class="pre">T</span> <span class="pre">|</span> <span class="pre">&quot;is</span> <span class="pre">not</span> <span class="pre">an</span> <span class="pre">EQ.type&quot;</span> <span class="pre">]</span></code>. It should be
read as: “find a class e such that its objects have type T or fail
with message &quot;T is not an EQ.type&quot;”.</p>
<p>The other utilities are used to ask <span class="smallcaps">Coq</span> to solve a specific unification
problem, that will in turn require the inference of some canonical structures.
They are explained in more details in <a class="reference internal" href="../zebibliography.html#cswcu" id="id3">[MT13]</a>.</p>
<p>We now have all we need to create a compact “packager” to declare
instances of the <code class="docutils literal notranslate"><span class="pre">LEQ</span></code> class.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">infrastructure</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">packager</span><span> </span><span class="coqdoc-var">T</span><span> </span><span class="coqdoc-var">e0</span><span> </span><span class="coqdoc-var">le0</span><span> (</span><span class="coqdoc-var">m0</span><span> : </span><span class="coqdoc-var">LEQ.mixin</span><span> </span><span class="coqdoc-var">e0</span><span> </span><span class="coqdoc-var">le0</span><span>) :=</span><span>
&nbsp;&nbsp;[</span><span class="coqdoc-var">find</span><span> </span><span class="coqdoc-var">e</span><span> | </span><span class="coqdoc-var">EQ.obj</span><span> </span><span class="coqdoc-var">e</span><span> ~ </span><span class="coqdoc-var">T</span><span> | &quot;is not an EQ.type&quot; ]</span><span>
&nbsp;&nbsp;[</span><span class="coqdoc-var">find</span><span> </span><span class="coqdoc-var">o</span><span> | </span><span class="coqdoc-var">LE.obj</span><span> </span><span class="coqdoc-var">o</span><span> ~ </span><span class="coqdoc-var">T</span><span> | &quot;is not an LE.type&quot; ]</span><span>
&nbsp;&nbsp;[</span><span class="coqdoc-var">find</span><span> </span><span class="coqdoc-var">ce</span><span> | </span><span class="coqdoc-var">EQ.class_of</span><span> </span><span class="coqdoc-var">e</span><span> ~ </span><span class="coqdoc-var">ce</span><span> ]</span><span>
&nbsp;&nbsp;[</span><span class="coqdoc-var">find</span><span> </span><span class="coqdoc-var">co</span><span> | </span><span class="coqdoc-var">LE.class_of</span><span> </span><span class="coqdoc-var">o</span><span> ~ </span><span class="coqdoc-var">co</span><span> ]</span><span>
&nbsp;&nbsp;[</span><span class="coqdoc-var">find</span><span> </span><span class="coqdoc-var">m</span><span> | </span><span class="coqdoc-var">m</span><span> ~ </span><span class="coqdoc-var">m0</span><span> | &quot;is not the right mixin&quot; ]</span><span>
&nbsp;&nbsp;</span><span class="coqdoc-var">LEQ._Pack</span><span> </span><span class="coqdoc-var">T</span><span> (</span><span class="coqdoc-var">LEQ.Class</span><span> </span><span class="coqdoc-var">ce</span><span> </span><span class="coqdoc-var">co</span><span> </span><span class="coqdoc-var">m</span><span>).</span></dt>
<dd><span class="first last">packager is defined</span></dd>
<dt><span class="coqdoc-keyword">Notation</span><span> </span><span class="coqdoc-var">Pack</span><span> </span><span class="coqdoc-var">T</span><span> </span><span class="coqdoc-var">m</span><span> := (</span><span class="coqdoc-var">packager</span><span> </span><span class="coqdoc-var">T</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">m</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">id</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">id</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">id</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">id</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">id</span><span>).</span></dt>
<dd class="coqtop-hidden"></dd>
</dl>
</div>
<p>The object <code class="docutils literal notranslate"><span class="pre">Pack</span></code> takes a type <code class="docutils literal notranslate"><span class="pre">T</span></code> (the key) and a mixin <code class="docutils literal notranslate"><span class="pre">m</span></code>. It infers all
the other pieces of the class <code class="docutils literal notranslate"><span class="pre">LEQ</span></code> and declares them as canonical
values associated to the <code class="docutils literal notranslate"><span class="pre">T</span></code> key. All in all, the only new piece of
information we add in the <code class="docutils literal notranslate"><span class="pre">LEQ</span></code> class is the mixin, all the rest is
already canonical for <code class="docutils literal notranslate"><span class="pre">T</span></code> and hence can be inferred by <span class="smallcaps">Coq</span>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Pack</span></code> is a notation, hence it is not type checked at the time of its
declaration. It will be type checked when it is used, an in that case <code class="docutils literal notranslate"><span class="pre">T</span></code> is
going to be a concrete type. The odd arguments <code class="docutils literal notranslate"><span class="pre">_</span></code> and <code class="docutils literal notranslate"><span class="pre">id</span></code> we pass to the
packager represent respectively the classes to be inferred (like <code class="docutils literal notranslate"><span class="pre">e</span></code>, <code class="docutils literal notranslate"><span class="pre">o</span></code>,
etc) and a token (<code class="docutils literal notranslate"><span class="pre">id</span></code>) to force their inference. Again, for all the details
the reader can refer to <a class="reference internal" href="../zebibliography.html#cswcu" id="id4">[MT13]</a>.</p>
<p>The declaration of canonical instances can now be way more compact:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Canonical</span><span> </span><span class="coqdoc-keyword">Structure</span><span> </span><span class="coqdoc-var">nat_LEQty</span><span> := </span><span class="coqdoc-keyword">Eval</span><span> </span><span class="coqdoc-tactic">hnf</span><span> </span><span class="coqdoc-tactic">in</span><span> </span><span class="coqdoc-var">Pack</span><span> </span><span class="coqdoc-var">nat</span><span> </span><span class="coqdoc-var">nat_LEQmx</span><span>.</span></dt>
<dd><span class="first last">nat_LEQty is defined</span></dd>
<dt><span class="coqdoc-keyword">Canonical</span><span> </span><span class="coqdoc-keyword">Structure</span><span> </span><span class="coqdoc-var">pair_LEQty</span><span> (</span><span class="coqdoc-var">l1</span><span> </span><span class="coqdoc-var">l2</span><span> : </span><span class="coqdoc-var">LEQ.type</span><span>) :=</span><span>
&nbsp;&nbsp;&nbsp;</span><span class="coqdoc-keyword">Eval</span><span> </span><span class="coqdoc-tactic">hnf</span><span> </span><span class="coqdoc-tactic">in</span><span> </span><span class="coqdoc-var">Pack</span><span> (</span><span class="coqdoc-var">LEQ.obj</span><span> </span><span class="coqdoc-var">l1</span><span> * </span><span class="coqdoc-var">LEQ.obj</span><span> </span><span class="coqdoc-var">l2</span><span>) (</span><span class="coqdoc-var">pair_LEQmx</span><span> </span><span class="coqdoc-var">l1</span><span> </span><span class="coqdoc-var">l2</span><span>).</span></dt>
<dd><span class="first">pair_LEQty is defined
Toplevel input, characters 0-118:
&gt; Canonical Structure pair_LEQty (l1 l2 : LEQ.type) :=    Eval hnf in Pack (LEQ.obj l1 * LEQ.obj l2) (pair_LEQmx l1 l2).
&gt; ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
</span><span class="ansi-fg-white ansi-bg-yellow ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Warning:</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> Ignoring canonical projection to LEQ.Class by LEQ.class_of in
</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">pair_LEQty</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">: redundant with </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">nat_LEQty</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last"></span></dd>
</dl>
</div>
<p>Error messages are also quite intelligible (if one skips to the end of
the message).</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-var">Fail</span><span> </span><span class="coqdoc-var">Canonical</span><span> </span><span class="coqdoc-keyword">Structure</span><span> </span><span class="coqdoc-var">err</span><span> := </span><span class="coqdoc-keyword">Eval</span><span> </span><span class="coqdoc-tactic">hnf</span><span> </span><span class="coqdoc-tactic">in</span><span> </span><span class="coqdoc-var">Pack</span><span> </span><span class="coqdoc-var">bool</span><span> </span><span class="coqdoc-var">nat_LEQmx</span><span>.</span></dt>
<dd><span class="first">The command has indeed failed with message:
The term &quot;</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">id</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&quot; has type &quot;</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">phantom</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> (</span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-blue ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">?e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">)</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">phantom</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> (</span><span class="ansi-fg-light-magenta ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EQ</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">.</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">obj</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-blue ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">?e</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">)&quot;
while it is expected to have type &quot;</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">'Error</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">:</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">bool</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">:</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative last">&quot;is not an EQ.type&quot;&quot;.</span></dd>
</dl>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="type-classes.html" class="btn btn-neutral float-right" title="Type Classes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="implicit-coercions.html" class="btn btn-neutral" title="Implicit Coercions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 1999-2018, Inria.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'8.8.2',
            LANGUAGE:'ja',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/notations.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>